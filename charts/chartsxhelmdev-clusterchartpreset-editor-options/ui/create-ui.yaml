steps:
- form:
    elements:
    - elements:
      - discriminator:
          bundle:
            default: {}
            type: object
        elements:
        - discriminator:
            enableProfiles:
              default: true
              type: boolean
          elements:
          - computed: hasMachineProfiles
            label:
              text: Use custom profiles?
            onChange: onMachineProfilesToggle
            schema:
              $ref: discriminator#/enableProfiles
            type: switch
          - elements:
            - addFormLabel: MachineProfile
              element:
                discriminator:
                  profileChoseSwitch:
                    default: false
                    type: boolean
                  profile:
                    default: ''
                    type: string
                elements:
                - label:
                    text: Choose from well-known profiles
                  schema:
                    $ref: discriminator#/profileChoseSwitch
                  type: switch
                - fetch: getKnownProfile
                  if: isKnownProfileChosen
                  label:
                    text: Profile
                  schema:
                    $ref: discriminator#/profile
                  type: select
                - computed: getProfileName
                  label:
                    text: ID
                  schema:
                    $ref: schema#/properties/spec/properties/admin/properties/machineProfiles/properties/machines/items/properties/id
                  type: input
                - computed: getProfileName
                  label:
                    text: Name
                  schema:
                    $ref: schema#/properties/spec/properties/admin/properties/machineProfiles/properties/machines/items/properties/name
                  type: input
                - elements:
                  - computed: setLimits|cpu
                    label:
                      text: CPU Limits
                    required: true
                    schema:
                      $ref: schema#/properties/spec/properties/admin/properties/machineProfiles/properties/machines/items/properties/limits/properties/cpu
                    type: input
                  - computed: setLimits|memory
                    label:
                      text: Memory Limits
                    required: true
                    schema:
                      $ref: schema#/properties/spec/properties/admin/properties/machineProfiles/properties/machines/items/properties/limits/properties/memory
                    type: input
                  schema:
                    $ref: schema#/properties/spec/properties/admin/properties/machineProfiles/properties/machines/items/properties/limits
                  type: single-step-form
                type: single-step-form
              label:
                text: Machine Profiles
              schema:
                $ref: schema#/properties/spec/properties/admin/properties/machineProfiles/properties/machines
              tableContents:
              - inTableColumn: true
                label:
                  text: ID
                path: id
                type: value
                typeOfValue: string
              - inTableColumn: true
                label:
                  text: Name
                path: name
                type: value
                typeOfValue: string
              - inTableColumn: true
                label:
                  text: Limits
                path: limits
                type: value
                typeOfValue: object-array
              temporaryPath: /profile
              type: single-step-form-array
            - customClass: mt-10
              fetch: getMachines|machines
              label:
                text: Available Machines 
              onChange: clearDefaultVersion|clickhouse
              schema:
                $ref: schema#/properties/spec/properties/admin/properties/machineProfiles/properties/available
              type: multiselect
            - fetch: getMachines|available
              label:
                text: Default Machine
              schema:
                $ref: schema#/properties/spec/properties/admin/properties/machineProfiles/properties/default
              type: select
            if: isEnableProfiles
            type: single-step-form
          hideForm: true
          label:
            text: Configure MachineProfiles
          show_label: true
          type: single-step-form
        if: isKubedbUiPreset
        type: single-step-form
      if: presetNameEqualsTo|kubedb-ui-presets
      type: single-step-form
    - elements:
      - elements:
        - alias: reusable_stash-presets
          chart:
            name: uibytebuildersdev-component-stash-presets
            version: v0.13.0
          moduleResolver: fetchJsons
          schema:
            $ref: schema#/properties/spec/properties/backup/properties/kubestash
          type: reusable-element
        - computed: setTool
          if: returnFalse
          schema:
            $ref: schema#/properties/spec/properties/backup/properties/tool
          type: input
        schema:
          $ref: schema#/properties/spec/properties/backup
        type: single-step-form
      if: presetNameEqualsTo|stash-presets
      type: single-step-form
    - elements: []
      type: single-step-form
    type: single-step-form
  id: options
  title: Basic
type: multi-step-form
