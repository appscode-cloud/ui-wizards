steps:
- form:
    elements:
    - elements:
      - type: input
        schema:
          $ref: schema#/properties/metadata/properties/release/properties/name
        label:
          text: Name
      - type: select
        fetch: getNamespaces
        schema:
          $ref: schema#/properties/metadata/properties/release/properties/namespace
        label:
          text: Namespace      
      - type: single-step-form
        elements:
        - isArray: true
          keys:
            label:
              text: Key
          label:
            text: Labels
          schema:
            $ref: schema#/properties/spec/properties/labels
          type: key-value-input-form
          values:
            label:
              text: Value
            schema:
              $ref: schema#/properties/spec/properties/labels/additionalProperties
            type: input
        - isArray: true
          keys:
            label:
              text: Key
          label:
            text: Annotations
          schema:
            $ref: schema#/properties/spec/properties/annotations
          type: key-value-input-form
          values:
            label:
              text: Value
            schema:
              $ref: schema#/properties/spec/properties/annotations/additionalProperties
            type: input
        hideForm: true
        label:
          text: Labels & Annotations
        show_label: true
      - customClass: mt-20
        label:
          text: Deletion Policy
        options:
        - description: options.deletionPolicy.delete.description
          text: Delete (Keep only database Secrets and backed up data)
          value: Delete
        - description: options.deletionPolicy.wipeOut.description
          text: WipeOut (Delete everything including backed up data)
          value: WipeOut
        schema:
          $ref: schema#/properties/spec/properties/deletionPolicy
        type: select
      - type: input
        schema:
          $ref: schema#/properties/spec/properties/runtimeSettings/properties/securityContext
        label:
          text: Security Context
      - type: single-step-form
        label:
          text: Backend
        show_label: true
        elements:
          - type: select
            schema:
              $ref: schema#/properties/spec/properties/backend/properties/provider
            options:
            - text: Azure
              value: Azure
            - text: AWS
              value: AWS
            - text: GKE
              value: GKE
            label:
              text: Provider
          - type: single-step-form
            if: isProvider|Azure
            schema:
              $ref: schema#/properties/spec/properties/backend/properties/azure
            label:
              text: Azure
            show_label: true
            elements:
              - type: single-step-form
                label:
                  text: Auth
                show_label: true
                schema:
                  $ref: schema#/properties/spec/properties/backend/properties/azure/properties/auth
                elements:
                - type: input
                  schema:
                    $ref: schema#/properties/spec/properties/backend/properties/azure/properties/auth/properties/AZURE_ACCOUNT_KEY
                  label:
                    text: Account Key
                - type: input
                  schema:
                    $ref: schema#/properties/spec/properties/backend/properties/azure/properties/auth/properties/AZURE_ACCOUNT_NAME
                  label:
                    text: Account Name
              - type: single-step-form
                label:
                  text: Spec
                show_label: true
                schema:
                  $ref: schema#/properties/spec/properties/backend/properties/azure/properties/spec
                elements:
                - type: input
                  schema:
                    $ref: schema#/properties/spec/properties/backend/properties/azure/properties/spec/properties/container
                  label:
                    text: Container
                - type: input
                  schema:
                    $ref: schema#/properties/spec/properties/backend/properties/azure/properties/spec/properties/maxConnections
                  label:
                    text: Max Connections
                - type: input
                  schema:
                    $ref: schema#/properties/spec/properties/backend/properties/azure/properties/spec/properties/prefix
                  label:
                    text: Prefix
          - type: single-step-form
            if: isProvider|AWS
            schema:
              $ref: schema#/properties/spec/properties/backend/properties/gcs
            label:
              text: GCS
            show_label: true
            elements:
              - type: single-step-form
                label:
                  text: Auth
                show_label: true
                schema:
                  $ref: schema#/properties/spec/properties/backend/properties/gcs/properties/auth
                elements:
                - type: input
                  schema:
                    $ref: schema#/properties/spec/properties/backend/properties/gcs/properties/auth/properties/GOOGLE_PROJECT_ID
                  label:
                    text: Google Project ID
                - type: input
                  schema:
                    $ref: schema#/properties/spec/properties/backend/properties/gcs/properties/auth/properties/GOOGLE_SERVICE_ACCOUNT_JSON_KEY
                  label:
                    text: Google Service Account JSON Key
              - type: single-step-form
                label:
                  text: Spec
                show_label: true
                schema:
                  $ref: schema#/properties/spec/properties/backend/properties/gcs/properties/spec
                elements:
                - type: input
                  schema:
                    $ref: schema#/properties/spec/properties/backend/properties/gcs/properties/spec/properties/bucket
                  label:
                    text: Bucket
                - type: input
                  schema:
                    $ref: schema#/properties/spec/properties/backend/properties/gcs/properties/spec/properties/maxConnections
                  label:
                    text: Max Connections
                - type: input
                  schema:
                    $ref: schema#/properties/spec/properties/backend/properties/gcs/properties/spec/properties/prefix
                  label:
                    text: Prefix
          - type: single-step-form
            if: isProvider|GKE
            schema:
              $ref: schema#/properties/spec/properties/backend/properties/s3
            label:
              text: S3
            show_label: true
            elements:
              - type: single-step-form
                label:
                  text: Auth
                show_label: true
                schema:
                  $ref: schema#/properties/spec/properties/backend/properties/s3/properties/auth
                elements:
                - type: input
                  schema:
                    $ref: schema#/properties/spec/properties/backend/properties/s3/properties/auth/properties/AWS_ACCESS_KEY_ID
                  label:
                    text: AWS Access Key ID
                - type: input
                  schema:
                    $ref: schema#/properties/spec/properties/backend/properties/s3/properties/auth/properties/AWS_SECRET_ACCESS_KEY
                  label:
                    text: AWS Secret Access Key
                - type: input
                  schema:
                    $ref: schema#/properties/spec/properties/backend/properties/s3/properties/auth/properties/CA_CERT_DATA
                  label:
                    text: CA Cert Data
              - type: single-step-form
                label:
                  text: Spec
                show_label: true
                schema:
                  $ref: schema#/properties/spec/properties/backend/properties/s3/properties/spec
                elements:
                - type: switch
                  schema:
                    $ref: schema#/properties/spec/properties/backend/properties/s3/properties/spec/properties/insecureTLS
                  label:
                    text: Insecure TLS
                - type: input
                  schema:
                    $ref: schema#/properties/spec/properties/backend/properties/s3/properties/spec/properties/bucket
                  label:
                    text: Bucket
                - type: input
                  schema:
                    $ref: schema#/properties/spec/properties/backend/properties/s3/properties/spec/properties/endpoint
                  label:
                    text: End Point
                - type: input
                  schema:
                    $ref: schema#/properties/spec/properties/backend/properties/s3/properties/spec/properties/prefix
                  label:
                    text: Prefix
                - type: input
                  schema:
                    $ref: schema#/properties/spec/properties/backend/properties/s3/properties/spec/properties/region
                  label:
                    text: Region
      schema:
        $ref: schema#/properties/spec
      type: single-step-form
    type: single-step-form
  id: options
  title: steps.0.label
type: multi-step-form
