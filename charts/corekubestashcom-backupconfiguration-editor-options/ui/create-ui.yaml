steps:
- form:
    discriminator:
      nameSpaceApi:
        default: false
        type: boolean
    elements:
    - computed: init
      if: returnFalse
      type: label-element
    - elements:
      - fetch: getNamespaces
        hasGroup: isRancherManaged
        label:
          text: Namespace
        schema:
          $ref: schema#/properties/spec/properties/backend/properties/retentionPolicy/properties/namespace
        type: select
      - fetch: getNames|retentionPolicy
        label:
          text: name
        schema:
          $ref: schema#/properties/spec/properties/backend/properties/retentionPolicy/properties/name
        type: select
      label:
        text: Retention Policy
      show_label: true
      schema:
      $ref: schema#/properties/spec/properties/backend/properties/retentionPolicy
      type: single-step-form
    - addFormLabel: Session
      element:
        elements:
        - label:
            text: Session Name
          schema:
            $ref: schema#/properties/spec/properties/sessions/items/properties/sessionName
          type: input
        - label:
            text: Schedule
          schema:
            $ref: schema#/properties/spec/properties/sessions/items/properties/schedule
          type: input
        - elements:
          - label:
              text: Security Context
            schema:
              $ref: schema#/properties/spec/properties/sessions/items/properties/addon/properties/jobTemplate/properties/securityContext
            type: input
          - fetch: getAddon
            label:
              text: Name
            onChange: clearTasks
            schema:
              $ref: schema#/properties/spec/properties/sessions/items/properties/addon/properties/name
            type: select
          - addFormLabel: Task
            element:
              elements:
              - fetch: getTaskNames
                label:
                  text: Name
                schema:
                  $ref: schema#/properties/spec/properties/sessions/items/properties/addon/properties/tasks/items/properties/name
                type: select
              - label:
                  text: Params
                schema:
                  $ref: schema#/properties/spec/properties/sessions/items/properties/addon/properties/tasks/items/properties/params
                type: editor
              type: single-step-form
            label:
              text: Tasks
            resetDependencyPath: /session/addon/name
            resetOnChange: true
            schema:
              $ref: schema#/properties/spec/properties/sessions/items/properties/addon/properties/tasks
            tableContents:
            - inTableColumn: true
              label:
                text: Name
              path: name
              type: value
              typeOfValue: string
            - inTableColumn: true
              label:
                text: Params
              path: params
              type: value
              typeOfValue: string
            type: single-step-form-array
          label:
            text: Addon
          schema:
            $ref: schema#/properties/spec/properties/sessions/items/properties/addon
          show_label: true
          type: single-step-form
          schema:
            $ref: schema#/properties/spec/properties/sessions/items/properties/repoName
          type: input
        type: single-step-form
      label:
        text: Session
      schema:
        $ref: schema#/properties/spec/properties/sessions
      tableContents:
      - inTableColumn: true
        label:
          text: Repo Name
        path: repoName
        type: value
        typeOfValue: string
      - inTableColumn: true
        label:
          text: Schedule
        path: schedule
        type: value
        typeOfValue: string
      - inTableColumn: true
        label:
          text: Session Name
        path: sessionName
        type: value
        typeOfValue: string
      temporaryPath: /session
      type: single-step-form-array
    type: single-step-form
  id: options
  title: steps.0.label
type: multi-step-form
