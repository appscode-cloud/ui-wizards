steps:
- form:
    elements:
    - disabled: true
      label:
        text: labels.database.name
      onChange: onNameChange
      schema:
        $ref: schema#/properties/metadata/properties/release/properties/name
      type: input
    type: single-step-form
  id: basic
  title: steps.0.label
- form:
    discriminator:
      repoInitialSelectionStatus:
        type: string
      scheduleBackup:
        default: "yes"
        type: string
    elements:
    - computed: initScheduleBackupForEdit
      if: showScheduleBackup
      label:
        text: labels.backup.title
      onChange: onScheduleBackupChange
      options:
      - text: options.yesOrNo.yes.text
        value: "yes"
      - text: options.yesOrNo.no.text
        value: "no"
      schema:
        $ref: discriminator#/properties/scheduleBackup
      type: radio
    - discriminator:
        backupEnabled:
          default: false
          type: boolean
      elements:
      - computed: setBackupSwitch
        label:
          text: Enable Backup
        onChange: onBackupChange
        schema:
          $ref: discriminator#/backupEnabled
        type: switch
      - discriminator:
          backupInvoker:
            type: string
        elements:
        - computed: initBackupInvoker
          label:
            text: labels.backup.invoker
          onChange: onBackupInvokerChange
          options:
          - text: Backup Configuration
            value: backupConfiguration
          - text: Backup Blueprint
            value: backupBlueprint
          schema:
            $ref: discriminator#/properties/backupInvoker
          type: radio
        - elements:
          - discriminator:
              backupSchedule:
                type: string
            elements:
            - computed: getDefaultSchedule|resources/coreKubestashComBackupConfiguration/spec/sessions
              label:
                text: labels.backupConfiguration.schedule
              onChange: onInputChangeSchedule|resources/coreKubestashComBackupConfiguration/spec/sessions|backupSchedule
              required: true
              schema:
                $ref: discriminator#/backupSchedule
              type: input
            type: single-step-form
          - discriminator:
              storageRefName:
                type: string
              storageRefNamespace:
                type: string
            elements:
            - computed: getDefault|/resources/coreKubestashComBackupConfiguration/spec/backends|storageRef|namespace
              fetch: getNamespaceArray
              hasGroup: isRancherManaged
              label:
                text: Namespace
              onChange: onInputChange|resources/coreKubestashComBackupConfiguration/spec/backends|storageRef|namespace|storageRefNamespace
              required: true
              schema:
                $ref: discriminator#/storageRefNamespace
              type: select
            - computed: getDefault|/resources/coreKubestashComBackupConfiguration/spec/backends|storageRef|name
              fetch: fetchNames|v1alpha1|backupstorages|storageRefNamespace
              label:
                text: Name
              onChange: onInputChange|resources/coreKubestashComBackupConfiguration/spec/backends|storageRef|name|storageRefName
              required: true
              schema:
                $ref: discriminator#/storageRefName
              type: select
            label:
              text: StorageRef
            show_label: true
            type: single-step-form
          - discriminator:
              retentionPolicyName:
                type: string
              retentionPolicyNamespace:
                type: string
            elements:
            - computed: getDefault|/resources/coreKubestashComBackupConfiguration/spec/backends|retentionPolicy|namespace
              fetch: getNamespaceArray
              hasGroup: isRancherManaged
              label:
                text: Namespace
              onChange: onInputChange|resources/coreKubestashComBackupConfiguration/spec/backends|retentionPolicy|namespace|retentionPolicyNamespace
              required: true
              schema:
                $ref: discriminator#/retentionPolicyNamespace
              type: select
            - computed: getDefault|/resources/coreKubestashComBackupConfiguration/spec/backends|retentionPolicy|name
              fetch: fetchNames|v1alpha1|retentionpolicies|retentionPolicyNamespace
              label:
                text: Name
              onChange: onInputChange|resources/coreKubestashComBackupConfiguration/spec/backends|retentionPolicy|name|retentionPolicyName
              required: true
              schema:
                $ref: discriminator#/retentionPolicyName
              type: select
            label:
              text: Retention Policy
            show_label: true
            type: single-step-form
          - discriminator:
              encryptionSecretName:
                type: string
              encryptionSecretNamespace:
                type: string
            elements:
            - computed: getDefault|/resources/coreKubestashComBackupConfiguration/spec/sessions|encryptionSecret|namespace
              fetch: getNamespaceArray
              hasGroup: isRancherManaged
              label:
                text: Namespace
              onChange: onInputChange|/resources/coreKubestashComBackupConfiguration/spec/sessions|encryptionSecret|namespace|encryptionSecretNamespace
              required: true
              schema:
                $ref: discriminator#/encryptionSecretNamespace
              type: select
            - computed: getDefault|/resources/coreKubestashComBackupConfiguration/spec/sessions|encryptionSecret|name
              fetch: fetchNames|v1|secrets|encryptionSecretNamespace
              label:
                text: Name
              onChange: onInputChange|/resources/coreKubestashComBackupConfiguration/spec/sessions|encryptionSecret|name|encryptionSecretName
              required: true
              schema:
                $ref: discriminator#/encryptionSecretName
              type: select
            label:
              text: Encryption Secret
            show_label: true
            type: single-step-form
          if: showInvokerForm|backupConfiguration
          type: single-step-form
        if: isBackupToggled
        type: single-step-form
      if: showBackupForm
      label:
        text: Backup Form
      type: single-step-form
    type: single-step-form
  id: backupconfiguration
  title: steps.4.label
type: multi-step-form
