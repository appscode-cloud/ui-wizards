type: multi-step-form
step:
  - type: single-step-form
    id: backupconfiguration
    # label: Backup
    schema: schema/
    elements:
      - type: radio
        label: Schedule a Backup?
        schema: temp/properties/scheduleBackup
        isHorizontal: true
        options:
          - text: 'Yes'
            value: 'yes'
          - text: 'No'
            value: 'no'
        if:
          type: function
          name: showScheduleBackup
        init:
          type: func
          value: initScheduleBackupForEdit
        watcher:
          func: onScheduleBackupChange
          paths:
            - temp/properties/scheduleBackup
      - type: block-layout
        label: Backup Form
        showLabels: false
        loader: initBackupData
        if:
          type: function
          name: showBackupForm
        elements:
          - type: radio
            label: Select Backup Type
            schema: temp/properties/backupType
            isHorizontal: true
            options:
              - text: BackupConfig
                value: BackupConfig
                description: 'Create, Delete or Modify BackupConfig'
              - text: BackupBlueprint
                value: BackupBlueprint
                description: Enable/Disable BackupBlueprint
            if:
              type: function
              name: isBackupDataLoadedTrue
            init:
              type: func
              value: setBackupType
            loader: getTypes
            watcher:
              func: onBackupTypeChange
              paths:
                - temp/properties/backupType
          - type: block-layout
            label: Config
            if:
              type: function
              name: isBackupType|BackupConfig
            elements:
              - type: select
                label: Select Context
                schema: temp/properties/backupConfigContext
                validation:
                  type: required
                loader: getContext
                watcher:
                  func: onContextChange
                  paths:
                    - temp/properties/backupConfigContext
              - type: select
                label: Select BackupConfig
                schema: temp/properties/config
                validation:
                  type: required
                if:
                  type: function
                  name: showConfigList
                loader: getConfigList
                watcher:
                  func: onConfigChange
                  paths:
                    - temp/properties/config
              - type: input
                label: Schedule
                schema: temp/properties/schedule
                validation:
                  type: required
                if:
                  type: function
                  name: showSchedule
                loader:
                  name: getDefaultSchedule|/resources/coreKubestashComBackupConfiguration/spec/sessions
                  watchPaths:
                    - temp/properties/config
                watcher:
                  func: onInputChangeSchedule|/resources/coreKubestashComBackupConfiguration/spec/sessions|schedule
                  paths:
                    - temp/properties/schedule
              - type: switch
                label: Paused
                fullwidth: true
                schema: schema/properties/resources/properties/coreKubestashComBackupConfiguration/properties/spec/properties/paused
                if:
                  type: function
                  name: showPause
                watcher:
                  func: setPausedValue
                  paths:
                    - temp/properties/config
                init:
                  type: func
                  value: setPausedValue
          - type: block-layout
            label: Blueprint
            if:
              type: function
              name: isBackupType|BackupBlueprint
            elements:
              - type: switch
                label: Enable Backup Blueprint
                fullwidth: true
                subtitle: Use a backup blueprint template to automatically configure backups for similar databases
                schema: temp/properties/blueprintEnabled
                init:
                  type: func
                  value: setBlueprintSwitch
                watcher:
                  func: onBlueprintChange
                  paths:
                    - temp/properties/blueprintEnabled
          - type: block-layout
            label: Archiver
            if:
              type: function
              name: isBackupType|Archiver
            elements:
              - type: switch
                label: Enable Archiver
                fullwidth: true
                schema: temp/properties/archiverEnabled
                init:
                  type: func
                  value: setArchiverSwitch
                watcher:
                  func: onArchiverChange
                  paths:
                    - temp/properties/archiverEnabled

  - type: single-step-form
    id: monitoring
    loader: initMonitoring
    elements:
    - type: label-element
      label: To update Exporter Resource section click on Create OpsRequest
    - type: anchor
      label: Create OpsRequest
      schema: temp/properties/opsRequestUrl
      init:
        type: func
        value: getOpsRequestUrl|VerticalScaling
    - type: switch
      label: Enable Monitoring
      fullwidth: true
      schema: temp/properties/enableMonitoring
      init:
        type: func
        value: isValueExistInModel|/resources/kubedbComMongoDB/spec/monitor
      watcher:
        func: onEnableMonitoringChange
        paths:
          - temp/properties/enableMonitoring
    - type: block-layout
      if:
        type: function
        name: showMonitoringSection
      elements:
        - type: radio
          label: Select a Monitoring Method
          schema: schema/properties/resources/properties/kubedbComMongoDB/properties/spec/properties/monitor/properties/agent
          isHorizontal: true
          options:
          - text: Prometheus Operator
            value: prometheus.io/operator
            description: Inject metric exporter sidecar and creates a ServiceMonitor
          - text: Custom ServiceMonitor
            value: prometheus.io
            description: Injects the metric exporter sidecar and let you customize ServiceMonitor
          - text: Custom Scrapper
            value: prometheus.io/builtin
            description: Inject metric exporter sidecar and add Prometheus annotations to the stats Service
          init:
            type: static
            value: prometheus.io/operator
          watcher:
            func: onAgentChange
            paths:
              - schema/properties/resources/properties/kubedbComMongoDB/properties/spec/properties/monitor/properties/agent
        - type: block-layout
          label: ServiceMonitor Configuration  
          showLabels: true 
          if: 
            type: function
            name: isEqualToModelPathValue|prometheus.io/operator|/resources/kubedbComMongoDB/spec/monitor/agent
          elements:
            - label: Scrapping Interval
              schema: schema/properties/resources/properties/kubedbComMongoDB/properties/spec/properties/monitor/properties/prometheus/properties/serviceMonitor/properties/interval
              type: input 
        - type: block-layout
          label: Service Monitor
          showLabels: true
          if:
            type: function
            name: isEqualToModelPathValue|prometheus.io|/resources/kubedbComMongoDB/spec/monitor/agent
          elements:
          - type: array-object-form
            label: Endpoints
            buttonClass: is-light is-outlined
            schema: schema/properties/resources/properties/monitoringCoreosComServiceMonitor/properties/spec/properties/endpoints
            elements:
            - type: switch
              label: Honor labels
              fullwidth: true
              schema: honorLabels
            - type: input
              label: Interval
              schema: interval
            - type: input
              label: Path
              schema: path
            - type: input
              label: Port
              schema: port
          - type: select
            multiple: true
            label: Match Namespaces
            schema: schema/properties/resources/properties/monitoringCoreosComServiceMonitor/properties/spec/properties/namespaceSelector/properties/matchNames
            loader: getResources|core|v1|namespaces
            if: 
              type: function
              name: returnFalse
          - type: block-layout
            showLabels: false
            # schema: schema/properties/resources/properties/monitoringCoreosComServiceMonitor/properties/spec/properties/selector
            if: 
              type: function
              name: returnFalse
            elements:
              - type: object-item
                label: Labels
                schema: schema/properties/resources/properties/monitoringCoreosComServiceMonitor/properties/spec/properties/selector/properties/matchLabels
        - type: object-item
          schema: schema/properties/resources/properties/monitoringCoreosComServiceMonitor/properties/metadata/properties/labels
          label : Labels
          buttonClass: is-light is-outlined
          if:
            type: function
            name: isEqualToModelPathValue|prometheus.io|/resources/kubedbComMongoDB/spec/monitor/agent
          # individualItemDisabilityCheck: disableLableChecker
        - type: label-element
          label: Exporter Configuration
          schema: ''
        - type: switch
          label: Customize Exporter Sidecar
          fullwidth: true
          schema: temp/properties/customizeExporter
          init:
            type: static
            value: true
          watcher:
            func: onCustomizeExporterChange
            paths:
              - temp/properties/customizeExporter
        - type: block-layout
          label: Customer Exporter Section
          showLabels: false
          loader: setMetadata
          if:
            type: function
            name: showCustomizeExporterSection
          elements:
            - type: machine-compare
              label: Resources
              schema: schema/properties/resources/properties/kubedbComMongoDB/properties/spec/properties/monitor/properties/prometheus/properties/exporter/properties/resources
              if: 
                type: function
                name: returnFalse
            - type: label-element
              label: Security Context
              schema: ''
            - type: input
              schema:  schema/properties/resources/properties/kubedbComMongoDB/properties/spec/properties/monitor/properties/prometheus/properties/exporter/properties/securityContext/properties/runAsUser
              label: Run as User
            - type: input
              schema: schema/properties/resources/properties/kubedbComMongoDB/properties/spec/properties/monitor/properties/prometheus/properties/exporter/properties/securityContext/properties/runAsGroup
              label: Run as Group
            - type: input
              schema: schema/properties/resources/properties/kubedbComMongoDB/properties/spec/properties/monitor/properties/prometheus/properties/exporter/properties/port
              label: Port
            - type: array-item-form
              label: Args
              buttonClass: is-light is-outlined
              schema: schema/properties/resources/properties/kubedbComMongoDB/properties/spec/properties/monitor/properties/prometheus/properties/exporter/properties/args
              init:
                type: static
                value: ['--compatible-mode']
              element:
                type: input
                label: Args
                # isSubsection: true
            - type: block-layout
              label: Metadata
              showLabels: false
              elements: 
                  #remove: should be array-object-form after fixes
                - type: array-object-form
                  init:
                    type: func
                    value: initEnvArray
                  label: Environment Variables
                  buttonClass: is-light is-outlined
                  watcher:
                    func: onEnvArrayChange
                    paths:
                      - temp/properties/env
                  schema: temp/properties/env
                  elements:
                  - type: input
                    label: Name
                    schema: name
                    validation:
                      type: required
                  - type: radio
                    label: Value From
                    schema: temp/properties/valueFromType
                    init: 
                      type: func 
                      value: setValueFrom
                    options:
                    - text: Input
                      value: input
                    - text: Secret
                      value: secret
                    - text: ConfigMap
                      value: configMap
                    watcher:
                      func: onValueFromChange
                      paths:
                        - temp/properties/valueFromType
                  - type: input 
                    label: Value 
                    schema: value
                    if:
                      name: isEqualToTemp|input
                      type: function
                  - type: select
                    if:
                      type: function
                      name: isEqualToTemp|configMap
                    label: ConfigMap Name
                    schema: valueFrom/properties/configMapKeyRef/properties/name
                    loader:
                      name: resourceNames|core|v1|configmaps
                      watchPaths:
                        - schema/metadata/release/namespace
                  - type: select
                    label: ConfigMap Key
                    schema: valueFrom/properties/configMapKeyRef/properties/key
                    if:
                      type: function
                      name: isEqualToTemp|configMap
                    loader:
                      name: getConfigMapKeys
                      watchPaths:
                        - schema/resources/kubedbComMongoDB/spec/monitor/prometheus/exporter/env/dynamicIndex/valueFrom/configMapKeyRef/name
                        - schema/metadata/release/namespace
                  - type: select
                    label: Secret Name
                    schema: valueFrom/properties/secretKeyRef/properties/name
                    if:
                      type: function
                      name: isEqualToTemp|secret
                    loader:
                      name: getSecrets
                      watchPaths:
                        - schema/metadata/release/namespace
                  - type: select
                    label: Secret Key
                    schema: valueFrom/properties/secretKeyRef/properties/key
                    if:
                      type: function
                      name: isEqualToTemp|secret
                    loader:
                      name: getSecretKeys
                      watchPaths:
                        - schema/resources/kubedbComMongoDB/spec/monitor/prometheus/exporter/env/dynamicIndex/valueFrom/secretKeyRef/name
                        - schema/metadata/release/namespace

  - type: single-step-form
    id: compute-autoscaler
    loader: getDbDetails
    elements:
    - type: block-layout
      showLabels: false
      loader: fetchTopologyMachines
      elements:
        # standalone mode
        - type: switch
          label: Trigger
          fullwidth: true
          if:
            type: function
            name: mongoTypeEqualsTo|standalone|compute
          init:
            type: func
            value: setTrigger|autoscalingKubedbComMongoDBAutoscaler/spec/compute/standalone/trigger
          schema: temp/properties/compute/properties/standalone/properties/trigger
          watcher:
            func: onTriggerChange|compute/standalone
            paths:
              - temp/properties/compute/properties/standalone/properties/trigger
        - type: label-element
          label: Pod lifetime threshold
          subtitle: Specifies the duration a pod can exist before using considered for scaling decisions, ensuring resource optimization and workload stability
          if:
            type: function
            name: mongoTypeEqualsTo|standalone|compute
        - type: input
          label: Pod LifeTime Threshold (e.g., 10m 30s)
          schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/standalone/properties/podLifeTimeThreshold
          customClass: width-300
          if:
            type: function
            name: mongoTypeEqualsTo|standalone|compute
        - type: block-layout
          label: Standalone
          if:
            type: function
            name: mongoTypeEqualsTo|standalone|compute
          showLabels: true
          # schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/standalone
          elements:
            - type:  threshold-input
              label: ResourceDiff Percentage
              schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/standalone/properties/resourceDiffPercentage
              customClass: width-300
            - type: label-element
              label: Resource Configuration
              subtitle: Define minimum and maximum allowed resources to ensure optimal database performance
            - type: block-layout
              showLabels: false
              elements:
                - type: machine-compare
                  label: Min Allowed Profile
                  header: Minimum Resource Limit
                  schema: temp/properties/allowedMachine-standalone-min
                  if:
                    type: function
                    name: hasAnnotations
                  init:
                    type: func
                    value: setAllowedMachine|standalone|min
                  loader:
                    name: getMachines|standalone|min
                    watchPaths:
                      - temp/properties/topologyMachines
                      - temp/properties/allowedMachine-standalone-max
                  watcher:
                    func: onMachineChange|standalone
                    paths:
                      - temp/properties/allowedMachine-standalone-min
                - type: block-layout
                  label: Min Allowed
                  fixedBlock: true
                  if:
                    type: function
                    name: hasNoAnnotations
                  showLabels: true
                  elements:
                    - type: input-compare
                      label: Cpu
                      schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/standalone/properties/minAllowed/properties/cpu
                    - type: input-compare
                      label: Memory
                      schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/standalone/properties/minAllowed/properties/memory
                - type: machine-compare
                  label: Max Allowed Profile
                  header: Maximum Resource Limit
                  schema: temp/properties/allowedMachine-standalone-max
                  if:
                    type: function
                    name: hasAnnotations
                  init:
                    type: func
                    value: setAllowedMachine|standalone|max
                  loader:
                    name: getMachines|standalone|max
                    watchPaths:
                      - temp/properties/topologyMachines
                      - temp/properties/allowedMachine-standalone-min
                  watcher:
                    func: onMachineChange|standalone
                    paths:
                      - temp/properties/allowedMachine-standalone-max
                - type: block-layout
                  label: Max Allowed
                  fixedBlock: true
                  if:
                    type: function
                    name: hasNoAnnotations
                  showLabels: true
                  elements:
                    - type: input-compare
                      label: Cpu
                      schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/standalone/properties/maxAllowed/properties/cpu
                    - type: input-compare
                      label: Memory
                      schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/standalone/properties/maxAllowed/properties/memory
            - type: select
              label: Controlled Resources
              loader: setControlledResources|compute/standalone
              multiple: true
              schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/standalone/properties/controlledResources
            - type: select
              label: Container Controlled Values
              options:
              - text: Requests And Limits
                value: RequestsAndLimits
              - text: Requests Only
                value: RequestsOnly
              schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/standalone/properties/containerControlledValues
            - type: block-layout
              label: In Memory Storage
              showLabels: true
              if:
                type: function
                name: showStorageMemoryOption
              # schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/standalone/properties/inMemoryStorage
              elements:
                - type: threshold-input
                  label: Scaling Factor Percentage
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/standalone/properties/inMemoryStorage/properties/scalingFactorPercentage
                - type: threshold-input
                  label: Usage Threshold Percentage
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/standalone/properties/inMemoryStorage/properties/usageThresholdPercentage
        #  replicaset mode
        - type: switch
          label: Trigger
          fullwidth: true
          if:
            type: function
            name: mongoTypeEqualsTo|replicaSet|compute
          init:
            type: func
            value: setTrigger|autoscalingKubedbComMongoDBAutoscaler/spec/compute/replicaSet/trigger
          schema: temp/properties/compute/properties/replicaSet/properties/trigger
          watcher:
            func: onTriggerChange|compute/replicaSet
            paths:
              - temp/properties/compute/properties/replicaSet/properties/trigger
        - type: label-element
          label: Pod lifetime threshold
          subtitle: Specifies the duration a pod can exist before using considered for scaling decisions, ensuring resource optimization and workload stability
          if:
            type: function
            name: mongoTypeEqualsTo|replicaSet|compute
        - type: input
          label: Pod LifeTime Threshold (e.g., 10m 30s)
          schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/replicaSet/properties/podLifeTimeThreshold
          customClass: width-300
          if:
            type: function
            name: mongoTypeEqualsTo|replicaSet|compute
        - type: block-layout
          label: ReplicaSet
          if:
            type: function
            name: mongoTypeEqualsTo|replicaSet|compute
          showLabels: true
          # schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/replicaSet
          elements:
            - type:  threshold-input
              label: ResourceDiff Percentage
              schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/replicaSet/properties/resourceDiffPercentage
              customClass: width-300
            - type: label-element
              label: Resource Configuration
              subtitle: Define minimum and maximum allowed resources to ensure optimal database performance
            - type: block-layout
              showLabels: false
              elements:
                - type: machine-compare
                  label: Min Allowed Profile
                  header: Minimum Resource Limit
                  schema: temp/properties/allowedMachine-replicaSet-min
                  if:
                    type: function
                    name: hasAnnotations
                  init:
                    type: func
                    value: setAllowedMachine|replicaSet|min
                  loader:
                    name: getMachines|replicaSet|min
                    watchPaths:
                      - temp/properties/topologyMachines
                      - temp/properties/allowedMachine-replicaSet-max
                  watcher:
                    func: onMachineChange|replicaSet
                    paths:
                      - temp/properties/allowedMachine-replicaSet-min
                - type: block-layout
                  label: Min Allowed
                  fixedBlock: true
                  if:
                    type: function
                    name: hasNoAnnotations
                  showLabels: true
                  elements:
                    - type: input-compare
                      label: Cpu
                      schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/replicaSet/properties/minAllowed/properties/cpu
                    - type: input-compare
                      label: Memory
                      schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/replicaSet/properties/minAllowed/properties/memory
                - type: machine-compare
                  label: Max Allowed Profile
                  header: Maximum Resource Limit
                  schema: temp/properties/allowedMachine-replicaSet-max
                  if:
                    type: function
                    name: hasAnnotations
                  init:
                    type: func
                    value: setAllowedMachine|replicaSet|max
                  loader:
                    name: getMachines|replicaSet|max
                    watchPaths:
                      - temp/properties/topologyMachines
                      - temp/properties/allowedMachine-replicaSet-min
                  watcher:
                    func: onMachineChange|replicaSet
                    paths:
                      - temp/properties/allowedMachine-replicaSet-max
                - type: block-layout
                  label: Max Allowed
                  fixedBlock: true
                  if:
                    type: function
                    name: hasNoAnnotations
                  showLabels: true
                  elements:
                    - type: input-compare
                      label: Cpu
                      schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/replicaSet/properties/maxAllowed/properties/cpu
                    - type: input-compare
                      label: Memory
                      schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/replicaSet/properties/maxAllowed/properties/memory
            - type: select
              label: Controlled Resources
              loader: setControlledResources|compute/replicaSet
              multiple: true
              schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/replicaSet/properties/controlledResources
            - type: select
              label: Container Controlled Values
              options:
                - text: Requests And Limits
                  value: RequestsAndLimits
                - text: Requests Only
                  value: RequestsOnly
              schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/replicaSet/properties/containerControlledValues
            - type: block-layout
              label: In Memory Storage
              if:
                type: function
                name: showStorageMemoryOption
              showLabels: true
              # schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/replicaSet/properties/inMemoryStorage
              elements:
                - type: threshold-input
                  label: Scaling Factor Percentage
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/replicaSet/properties/inMemoryStorage/properties/scalingFactorPercentage
                - type: threshold-input
                  label: Usage Threshold Percentage
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/replicaSet/properties/inMemoryStorage/properties/usageThresholdPercentage
        # type sharded
        - type: block-layout
          showLabels: false
          if:
            type: function
            name: mongoTypeEqualsTo|sharded|compute
          elements:
            - type: switch
              label: Trigger
              fullwidth: true
              init:
                type: func
                value: setTrigger|autoscalingKubedbComMongoDBAutoscaler/spec/compute/shard/trigger
              schema: temp/properties/compute/properties/shard/properties/trigger
              watcher:
                func: onTriggerChange|compute/shard
                paths:
                  - temp/properties/compute/properties/shard/properties/trigger
            - type: label-element
              label: Pod lifetime threshold  
              subtitle: Specifies the duration a pod can exist before using considered for scaling decisions, ensuring resource optimization and workload stability
            - type: input
              label: Pod LifeTime Threshold (e.g., 10m 30s) 
              schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/shard/properties/podLifeTimeThreshold
              customClass: width-300
            - type: block-layout
              label: Shard
              showLabels: true
              # schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/shard
              elements:
                - type:  threshold-input
                  label: ResourceDiff Percentage
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/shard/properties/resourceDiffPercentage
                  customClass: width-300
                - type: label-element
                  label: Resource Configuration
                  subtitle: Define minimum and maximum allowed resources to ensure optimal database performance
                - type: block-layout
                  showLabels: false
                  elements:
                    - type: machine-compare
                      label: Min Allowed Profile
                      header: Minimum Resource Limit
                      schema: temp/properties/allowedMachine-shard-min
                      if:
                        type: function
                        name: hasAnnotations
                      init:
                        type: func
                        value: setAllowedMachine|shard|min
                      loader:
                        name: getMachines|shard|min
                        watchPaths:
                          - temp/properties/topologyMachines
                          - temp/properties/allowedMachine-shard-max
                      watcher:
                        func: onMachineChange|shard
                        paths:
                          - temp/properties/allowedMachine-shard-min
                    - type: block-layout
                      label: Min Allowed
                      fixedBlock: true
                      if:
                        type: function
                        name: hasNoAnnotations
                      showLabels: true
                      elements:
                        - type: input-compare
                          label: Cpu
                          schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/shard/properties/minAllowed/properties/cpu
                        - type: input-compare
                          label: Memory
                          schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/shard/properties/minAllowed/properties/memory
                    - type: machine-compare
                      label: Max Allowed Profile
                      header: Maximum Resource Limit
                      schema: temp/properties/allowedMachine-shard-max
                      if:
                        type: function
                        name: hasAnnotations
                      init:
                        type: func
                        value: setAllowedMachine|shard|max
                      loader:
                        name: getMachines|shard|max
                        watchPaths:
                          - temp/properties/topologyMachines
                          - temp/properties/allowedMachine-shard-min
                      watcher:
                        func: onMachineChange|shard
                        paths:
                          - temp/properties/allowedMachine-shard-max
                    - type: block-layout
                      label: Max Allowed
                      fixedBlock: true
                      if:
                        type: function
                        name: hasNoAnnotations
                      showLabels: true
                      elements:
                        - type: input-compare
                          label: Cpu
                          schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/shard/properties/maxAllowed/properties/cpu
                        - type: input-compare
                          label: Memory
                          schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/shard/properties/maxAllowed/properties/memory
                - type: select
                  label: Controlled Resources
                  loader: setControlledResources|compute/shard
                  multiple: true
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/shard/properties/controlledResources
                - type: select
                  label: Container Controlled Values
                  options:
                    - text: Requests And Limits
                      value: RequestsAndLimits
                    - text: Requests Only
                      value: RequestsOnly
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/shard/properties/containerControlledValues
                - type: block-layout
                  label: In Memory Storage
                  if:
                    type: function
                    name: showStorageMemoryOption
                  showLabels: true
                  # schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/shard/properties/inMemoryStorage
                  elements:
                    - type: threshold-input
                      label: Scaling Factor Percentage
                      schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/shard/properties/inMemoryStorage/properties/scalingFactorPercentage
                    - type: threshold-input
                      label: Usage Threshold Percentage
                      schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/shard/properties/inMemoryStorage/properties/usageThresholdPercentage
              
            - type: switch
              label: Trigger
              fullwidth: true
              init:
                type: func
                value: setTrigger|autoscalingKubedbComMongoDBAutoscaler/spec/compute/configServer/trigger
              schema: temp/properties/compute/properties/configServer/properties/trigger
              watcher:
                func: onTriggerChange|compute/configServer
                paths:
                  - temp/properties/compute/properties/configServer/properties/trigger
            - type: label-element
              label: Pod lifetime threshold 
              subtitle: Specifies the duration a pod can exist before using considered for scaling decisions, ensuring resource optimization and workload stability
            - type: input
              label: Pod LifeTime Threshold (e.g., 10m 30s) 
              schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/configServer/properties/podLifeTimeThreshold
              customClass: width-300
            - type: block-layout
              label: Config Server
              showLabels: true
              # schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/configServer
              elements:
                - type:  threshold-input
                  label: ResourceDiff Percentage
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/configServer/properties/resourceDiffPercentage
                  customClass: width-300
                - type: label-element
                  label: Resource Configuration
                  subtitle: Define minimum and maximum allowed resources to ensure optimal database performance
                - type: block-layout
                  showLabels: false
                  elements:
                    - type: machine-compare
                      label: Min Allowed Profile
                      header: Minimum Resource Limit
                      schema: temp/properties/allowedMachine-configServer-min
                      if:
                        type: function
                        name: hasAnnotations
                      init:
                        type: func
                        value: setAllowedMachine|configServer|min
                      loader:
                        name: getMachines|configServer|min
                        watchPaths:
                          - temp/properties/topologyMachines
                          - temp/properties/allowedMachine-configServer-max
                      watcher:
                        func: onMachineChange|configServer
                        paths:
                          - temp/properties/allowedMachine-configServer-min
                    - type: block-layout
                      label: Min Allowed
                      fixedBlock: true
                      if:
                        type: function
                        name: hasNoAnnotations
                      showLabels: true
                      elements:
                        - type: input-compare
                          label: Cpu
                          schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/configServer/properties/minAllowed/properties/cpu
                        - type: input-compare
                          label: Memory
                          schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/configServer/properties/minAllowed/properties/memory
                    - type: machine-compare
                      label: Max Allowed Profile
                      header: Maximum Resource Limit
                      schema: temp/properties/allowedMachine-configServer-max
                      if:
                        type: function
                        name: hasAnnotations
                      init:
                        type: func
                        value: setAllowedMachine|configServer|max
                      loader:
                        name: getMachines|configServer|max
                        watchPaths:
                          - temp/properties/topologyMachines
                          - temp/properties/allowedMachine-configServer-min
                      watcher:
                        func: onMachineChange|configServer
                        paths:
                          - temp/properties/allowedMachine-configServer-max
                    - type: block-layout
                      label: Max Allowed
                      fixedBlock: true
                      if:
                        type: function
                        name: hasNoAnnotations
                      showLabels: true
                      elements:
                        - type: input-compare
                          label: Cpu
                          schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/configServer/properties/maxAllowed/properties/cpu
                        - type: input-compare
                          label: Memory
                          schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/configServer/properties/maxAllowed/properties/memory
                - type: select
                  label: Controlled Resources
                  loader: setControlledResources|compute/configServer
                  multiple: true
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/configServer/properties/controlledResources
                - type: select
                  label: Container Controlled Values
                  options:
                    - text: Requests And Limits
                      value: RequestsAndLimits
                    - text: Requests Only
                      value: RequestsOnly
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/configServer/properties/containerControlledValues
                - type: block-layout
                  label: In Memory Storage
                  if:
                    type: function
                    name: showStorageMemoryOption
                  showLabels: true
                  # schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/configServer/properties/inMemoryStorage
                  elements:
                    - type: threshold-input
                      label: Scaling Factor Percentage
                      schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/configServer/properties/inMemoryStorage/properties/scalingFactorPercentage
                    - type: threshold-input
                      label: Usage Threshold Percentage
                      schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/configServer/properties/inMemoryStorage/properties/usageThresholdPercentage
            - type: switch
              label: Trigger
              fullwidth: true
              init:
                type: func
                value: setTrigger|autoscalingKubedbComMongoDBAutoscaler/spec/compute/arbiter/trigger
              schema: temp/properties/compute/properties/arbiter/properties/trigger
              watcher:
                func: onTriggerChange|compute/arbiter
                paths:
                  - temp/properties/compute/properties/arbiter/properties/trigger
            - type: label-element
              label: Pod lifetime threshold 
              subtitle: Specifies the duration a pod can exist before using considered for scaling decisions, ensuring resource optimization and workload stability
            - type: input
              label: Pod LifeTime Threshold (e.g., 10m 30s) 
              schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/arbiter/properties/podLifeTimeThreshold
              customClass: width-300
            - type: block-layout
              label: Arbiter
              showLabels: true
              hideBlock: true
              # schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/arbiter
              elements:
                - type: threshold-input
                  label: ResourceDiff Percentage
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/arbiter/properties/resourceDiffPercentage
                  customClass: width-300
                - type: label-element
                  label: Resource Configuration
                  subtitle: Define minimum and maximum allowed resources to ensure optimal database performance
                - type: block-layout
                  showLabels: false
                  elements:
                    - type: machine-compare
                      label: Min Allowed Profile
                      header: Minimum Resource Limit
                      schema: temp/properties/allowedMachine-arbiter-min
                      if:
                        type: function
                        name: hasAnnotations
                      init:
                        type: func
                        value: setAllowedMachine|arbiter|min
                      loader:
                        name: getMachines|arbiter|min
                        watchPaths:
                          - temp/properties/topologyMachines
                          - temp/properties/allowedMachine-arbiter-max
                      watcher:
                        func: onMachineChange|arbiter
                        paths:
                          - temp/properties/allowedMachine-arbiter-min
                    - type: block-layout
                      label: Min Allowed
                      fixedBlock: true
                      if:
                        type: function
                        name: hasNoAnnotations
                      showLabels: true
                      elements:
                        - type: input-compare
                          label: Cpu
                          schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/arbiter/properties/minAllowed/properties/cpu
                        - type: input-compare
                          label: Memory
                          schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/arbiter/properties/minAllowed/properties/memory
                    - type: machine-compare
                      label: Max Allowed Profile
                      header: Maximum Resource Limit
                      schema: temp/properties/allowedMachine-arbiter-max
                      if:
                        type: function
                        name: hasAnnotations
                      init:
                        type: func
                        value: setAllowedMachine|arbiter|max
                      loader:
                        name: getMachines|arbiter|max
                        watchPaths:
                          - temp/properties/topologyMachines
                          - temp/properties/allowedMachine-arbiter-min
                      watcher:
                        func: onMachineChange|arbiter
                        paths:
                          - temp/properties/allowedMachine-arbiter-max
                    - type: block-layout
                      label: Max Allowed
                      fixedBlock: true
                      if:
                        type: function
                        name: hasNoAnnotations
                      showLabels: true
                      elements:
                        - type: input-compare
                          label: Cpu
                          schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/arbiter/properties/maxAllowed/properties/cpu
                        - type: input-compare
                          label: Memory
                          schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/arbiter/properties/maxAllowed/properties/memory
                - type: select
                  label: Controlled Resources
                  loader: setControlledResources|compute/arbiter
                  multiple: true
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/arbiter/properties/controlledResources
                - type: select
                  label: Container Controlled Values
                  options:
                    - text: Requests And Limits
                      value: RequestsAndLimits
                    - text: Requests Only
                      value: RequestsOnly
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/arbiter/properties/containerControlledValues
                - type: block-layout
                  label: In Memory Storage
                  if:
                    type: function
                    name: showStorageMemoryOption
                  showLabels: true
                  # schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/arbiter/properties/inMemoryStorage
                  elements:
                    - type: threshold-input
                      label: Scaling Factor Percentage
                      schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/arbiter/properties/inMemoryStorage/properties/scalingFactorPercentage
                    - type: threshold-input
                      label: Usage Threshold Percentage
                      schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/arbiter/properties/inMemoryStorage/properties/usageThresholdPercentage
            - type: switch
              label: Trigger
              fullwidth: true
              init:
                type: func
                value: setTrigger|autoscalingKubedbComMongoDBAutoscaler/spec/compute/hidden/trigger
              schema: temp/properties/compute/properties/hidden/properties/trigger
              watcher:
                func: onTriggerChange|compute/hidden
                paths:
                  - temp/properties/compute/properties/hidden/properties/trigger
            - type: label-element
              label: Pod lifetime threshold 
              subtitle: Specifies the duration a pod can exist before using considered for scaling decisions, ensuring resource optimization and workload stability
            - type: input
              label: Pod LifeTime Threshold (e.g., 10m 30s) 
              schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/hidden/properties/podLifeTimeThreshold
              customClass: width-300
            - type: block-layout
              label: Hidden
              showLabels: true
              hideBlock: true
              # schema:  schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/hidden
              elements:
                - type: threshold-input
                  label: ResourceDiff Percentage
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/hidden/properties/resourceDiffPercentage
                  customClass: width-300
                - type: label-element
                  label: Resource Configuration
                  subtitle: Define minimum and maximum allowed resources to ensure optimal database performance
                - type: block-layout
                  showLabels: false
                  elements:
                    - type: machine-compare
                      label: Min Allowed Profile
                      header: Minimum Resource Limit
                      schema: temp/properties/allowedMachine-hidden-min
                      if:
                        type: function
                        name: hasAnnotations
                      init:
                        type: func
                        value: setAllowedMachine|hidden|min
                      loader:
                        name: getMachines|hidden|min
                        watchPaths:
                          - temp/properties/topologyMachines
                          - temp/properties/allowedMachine-hidden-max
                      watcher:
                        func: onMachineChange|hidden
                        paths:
                          - temp/properties/allowedMachine-hidden-min
                    - type: block-layout
                      label: Min Allowed
                      fixedBlock: true
                      if:
                        type: function
                        name: hasNoAnnotations
                      showLabels: true
                      elements:
                        - type: input-compare
                          label: Cpu
                          schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/hidden/properties/minAllowed/properties/cpu
                        - type: input-compare
                          label: Memory
                          schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/hidden/properties/minAllowed/properties/memory
                    - type: machine-compare
                      label: Max Allowed Profile
                      header: Maximum Resource Limit
                      schema: temp/properties/allowedMachine-hidden-max
                      if:
                        type: function
                        name: hasAnnotations
                      init:
                        type: func
                        value: setAllowedMachine|hidden|max
                      loader:
                        name: getMachines|hidden|max
                        watchPaths:
                          - temp/properties/topologyMachines
                          - temp/properties/allowedMachine-hidden-min
                      watcher:
                        func: onMachineChange|hidden
                        paths:
                          - temp/properties/allowedMachine-hidden-max
                    - type: block-layout
                      label: Max Allowed
                      fixedBlock: true
                      if:
                        type: function
                        name: hasNoAnnotations
                      showLabels: true
                      elements:
                        - type: input-compare
                          label: Cpu
                          schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/hidden/properties/maxAllowed/properties/cpu
                        - type: input-compare
                          label: Memory
                          schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/hidden/properties/maxAllowed/properties/memory
                - type: select
                  label: Controlled Resources
                  loader: setControlledResources|compute/hidden
                  multiple: true
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/hidden/properties/controlledResources
                - type: select
                  label: Container Controlled Values
                  options:
                    - text: Requests And Limits
                      value: RequestsAndLimits
                    - text: Requests Only
                      value: RequestsOnly
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/hidden/properties/containerControlledValues
                - type: block-layout
                  label: In Memory Storage
                  if:
                    type: function
                    name: showStorageMemoryOption
                  showLabels: true
                  # schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/hidden/properties/inMemoryStorage
                  elements:
                    - type: threshold-input
                      label: Scaling Factor Percentage
                      schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/hidden/properties/inMemoryStorage/properties/scalingFactorPercentage
                    - type: threshold-input
                      label: Usage Threshold Percentage
                      schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/hidden/properties/inMemoryStorage/properties/usageThresholdPercentage
            - type: switch
              label: Trigger
              fullwidth: true
              init:
                type: func
                value: setTrigger|autoscalingKubedbComMongoDBAutoscaler/spec/compute/mongos/trigger
              schema: temp/properties/compute/properties/mongos/properties/trigger
              watcher:
                func: onTriggerChange|compute/mongos
                paths:
                  - temp/properties/compute/properties/mongos/properties/trigger
            - type: label-element
              label: Pod lifetime threshold 
              subtitle: Specifies the duration a pod can exist before using considered for scaling decisions, ensuring resource optimization and workload stability
            - type: input
              label: Pod LifeTime Threshold (e.g., 10m 30s) 
              schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/mongos/properties/podLifeTimeThreshold
              customClass: width-300
            - type: block-layout
              label: Mongos 
              showLabels: true
              # schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/mongos
              elements:
                - type:  threshold-input
                  label: ResourceDiff Percentage
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/mongos/properties/resourceDiffPercentage
                  customClass: width-300
                - type: label-element
                  label: Resource Configuration
                  subtitle: Define minimum and maximum allowed resources to ensure optimal database performance
                - type: block-layout
                  showLabels: false
                  elements:
                    - type: machine-compare
                      label: Min Allowed Profile
                      header: Minimum Resource Limit
                      schema: temp/properties/allowedMachine-mongos-min
                      if:
                        type: function
                        name: hasAnnotations
                      init:
                        type: func
                        value: setAllowedMachine|mongos|min
                      loader:
                        name: getMachines|mongos|min
                        watchPaths:
                          - temp/properties/topologyMachines
                          - temp/properties/allowedMachine-mongos-max
                      watcher:
                        func: onMachineChange|mongos
                        paths:
                          - temp/properties/allowedMachine-mongos-min
                    - type: block-layout
                      label: Min Allowed
                      fixedBlock: true
                      if:
                        type: function
                        name: hasNoAnnotations
                      showLabels: true
                      elements:
                        - type: input-compare
                          label: Cpu
                          schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/mongos/properties/minAllowed/properties/cpu
                        - type: input-compare
                          label: Memory
                          schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/mongos/properties/minAllowed/properties/memory
                    - type: machine-compare
                      label: Max Allowed Profile
                      header: Maximum Resource Limit
                      schema: temp/properties/allowedMachine-mongos-max
                      if:
                        type: function
                        name: hasAnnotations
                      init:
                        type: func
                        value: setAllowedMachine|mongos|max
                      loader:
                        name: getMachines|mongos|max
                        watchPaths:
                          - temp/properties/topologyMachines
                          - temp/properties/allowedMachine-mongos-min
                      watcher:
                        func: onMachineChange|mongos
                        paths:
                          - temp/properties/allowedMachine-mongos-max
                    - type: block-layout
                      label: Max Allowed
                      fixedBlock: true
                      if:
                        type: function
                        name: hasNoAnnotations
                      showLabels: true
                      elements:
                        - type: input-compare
                          label: Cpu
                          schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/mongos/properties/maxAllowed/properties/cpu
                        - type: input-compare
                          label: Memory
                          schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/mongos/properties/maxAllowed/properties/memory
                - type: select
                  label: Controlled Resources
                  loader: setControlledResources|compute/mongos
                  multiple: true
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/mongos/properties/controlledResources
                - type: select
                  label: Container Controlled Values
                  options:
                    - text: Requests And Limits
                      value: RequestsAndLimits
                    - text: Requests Only
                      value: RequestsOnly
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/mongos/properties/containerControlledValues
                - type: block-layout
                  label: In Memory Storage
                  if:
                    type: function
                    name: showStorageMemoryOption
                  showLabels: true
                  # schema:  schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/mongos/properties/inMemoryStorage
                  elements:
                    - type: threshold-input
                      label: Scaling Factor Percentage
                      schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/mongos/properties/inMemoryStorage/properties/scalingFactorPercentage
                    - type: threshold-input
                      label: Usage Threshold Percentage
                      schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/mongos/properties/inMemoryStorage/properties/usageThresholdPercentage
        - type: block-layout
          label: NodeTopology
          if:
            type: function
            name: hasNoAnnotations
          showLabels: true
          # schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/nodeTopology
          elements:
            - type: select
              label: Select NodeTopology
              loader: fetchNodeTopology
              schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/nodeTopology/properties/name
            - type: threshold-input
              label: Scale Up DiffPercentage
              if:
                type: function
                name: isNodeTopologySelected
              schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/nodeTopology/properties/scaleUpDiffPercentage
            - type: threshold-input
              label: Scale Down DiffPercentage
              if:
                type: function
                name: isNodeTopologySelected
              schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/compute/properties/nodeTopology/properties/scaleDownDiffPercentage
        - type: block-layout
          label: Ops Request Options
          showLabels: true
          if:
            type: function
            name: showOpsRequestOptions
          # schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/opsRequestOptions
          elements:
            - type: block-layout
              label: Readiness Criteria
              showLabels: true
              # schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/opsRequestOptions/properties/readinessCriteria
              elements:
                - type: threshold-input
                  label: Objects Count Diff Percentage
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/opsRequestOptions/properties/readinessCriteria/properties/objectsCountDiffPercentage
                - type: input
                  label: Oplog Max Lag Seconds
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/opsRequestOptions/properties/readinessCriteria/properties/oplogMaxLagSeconds
            - type: time-picker
              label: Timeout
              schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/opsRequestOptions/properties/timeout
            - type: radio
              label: Apply
              init:
                type: func
                value: setApplyToIfReady
              options:
                - text: IfReady (OpsRequest will be applied if database is ready)
                  value: IfReady
                - text: Always (OpsRequest will always be applied)
                  value: Always
              schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/opsRequestOptions/properties/apply

  - type: single-step-form
    id: storage-autoscaler
    loader: getDbDetails
    elements:
    - type: block-layout
      showLabels: false
      elements:
        # standalone mode
        - type: switch
          label: Trigger
          fullwidth: true
          if:
            type: function
            name: mongoTypeEqualsTo|standalone|storage
          init:
            type: func
            value: setTrigger|autoscalingKubedbComMongoDBAutoscaler/spec/storage/standalone/trigger
          schema: temp/properties/storage/properties/standalone/properties/trigger
          watcher:
            func: onTriggerChange|storage/standalone
            paths:
              - temp/properties/storage/properties/standalone/properties/trigger
        - type: label-element
          label: Expansion Mode (Online/Offline)
          subtitle: For Online Mode enables scaling without downtime by dynamically resizing storage while the database remains operational and Offline Mode performs storage scaling during scheduled downtime, ensuring consistency but requiring database restarts.
          if:
            type: function
            name: mongoTypeEqualsTo|standalone|storage
        - type: select
          label: Mode
          description: Select how the storage expansion should be handled.
          if:
            type: function
            name: mongoTypeEqualsTo|standalone|storage
          options:
            - text: Online
              value: Online
            - text: Offline
              value: Offline
          schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/standalone/properties/expansionMode
        - type: block-layout
          label: Standalone
          if:
            type: function
            name: mongoTypeEqualsTo|standalone|storage
          showLabels: true
          elements:
            - type: threshold-input
              label: UsageThreshold (%)
              subtitle: Set the threshold percentage of storage usage to trigger scaling.
              schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/standalone/properties/usageThreshold
            - type: scaling-rules
              label: Scaling Rules
              schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/standalone/properties/scalingRules
              loader: setValueFromDbDetails|resources/kubedbComMongoDB/spec/storage/resources/requests/storage
              watcher:
                func: handleUnit|autoscalingKubedbComMongoDBAutoscaler/spec/storage/standalone/scalingRules|scalingRules
                paths:
                  - schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/standalone/properties/scalingRules
            - type: input
              label: Scaling Threshold
              schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/standalone/properties/scalingThreshold
            - type: input
              label: UpperBound
              schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/standalone/properties/upperBound
              watcher:
                func: handleUnit|autoscalingKubedbComMongoDBAutoscaler/spec/storage/standalone/upperBound
                paths:
                  - schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/standalone/properties/upperBound
        # replicaset mode
        - type: switch
          label: Trigger
          fullwidth: true
          if:
            type: function
            name: mongoTypeEqualsTo|replicaSet|storage
          init:
            type: func
            value: setTrigger|autoscalingKubedbComMongoDBAutoscaler/spec/storage/replicaSet/trigger
          schema: temp/properties/storage/properties/replicaSet/properties/trigger
          watcher:
            func: onTriggerChange|storage/replicaSet
            paths:
              - temp/properties/storage/properties/replicaSet/properties/trigger
        - type: label-element
          label: Expansion Mode (Online/Offline)
          subtitle: For Online Mode enables scaling without downtime by dynamically resizing storage while the database remains operational and Offline Mode performs storage scaling during scheduled downtime, ensuring consistency but requiring database restarts.
          if:
            type: function
            name: mongoTypeEqualsTo|replicaSet|storage
        - type: select
          label: Mode
          description: Select how the storage expansion should be handled.
          if:
            type: function
            name: mongoTypeEqualsTo|replicaSet|storage
          options:
            - text: Online
              value: Online
            - text: Offline
              value: Offline
          schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/replicaSet/properties/expansionMode
        - type: block-layout
          label: ReplicaSet
          if:
            type: function
            name: mongoTypeEqualsTo|replicaSet|storage
          showLabels: true
          elements:
            - type: threshold-input
              label: UsageThreshold (%)
              subtitle: Set the threshold percentage of storage usage to trigger scaling.
              schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/replicaSet/properties/usageThreshold
            - type: scaling-rules
              label: Scaling Rules
              schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/replicaSet/properties/scalingRules
              loader: setValueFromDbDetails|resources/kubedbComMongoDB/spec/storage/resources/requests/storage
              watcher:
                func: handleUnit|autoscalingKubedbComMongoDBAutoscaler/spec/storage/replicaSet/scalingRules|scalingRules
                paths:
                  - schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/replicaSet/properties/scalingRules
            - type: input
              label: Scaling Threshold
              schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/replicaSet/properties/scalingThreshold
            - type: input
              label: UpperBound
              schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/replicaSet/properties/upperBound
              watcher:
                func: handleUnit|autoscalingKubedbComMongoDBAutoscaler/spec/storage/replicaSet/upperBound
                paths:
                  - schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/replicaSet/properties/upperBound
        # sharded mode
        - type: switch
          label: Trigger
          fullwidth: true
          if:
            type: function
            name: mongoTypeEqualsTo|sharded|storage
          init:
            type: func
            value: setTrigger|autoscalingKubedbComMongoDBAutoscaler/spec/storage/shard/trigger
          schema: temp/properties/storage/properties/shard/properties/trigger
          watcher:
            func: onTriggerChange|storage/shard
            paths:
              - temp/properties/storage/properties/shard/properties/trigger
        - type: label-element
          label: Expansion Mode (Online/Offline)
          subtitle: For Online Mode enables scaling without downtime by dynamically resizing storage while the database remains operational and Offline Mode performs storage scaling during scheduled downtime, ensuring consistency but requiring database restarts.
          if:
            type: function
            name: mongoTypeEqualsTo|sharded|storage
        - type: select
          label: Mode
          description: Select how the storage expansion should be handled.
          if:
            type: function
            name: mongoTypeEqualsTo|sharded|storage
          options:
            - text: Online
              value: Online
            - text: Offline
              value: Offline
          schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/shard/properties/expansionMode
        - type: block-layout
          showLabels: false
          if:
            type: function
            name: mongoTypeEqualsTo|sharded|storage
          elements:
            - type: block-layout
              label: Shard
              showLabels: true
              elements:
                - type: threshold-input
                  label: UsageThreshold (%)
                  subtitle: Set the threshold percentage of storage usage to trigger scaling.
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/shard/properties/usageThreshold
                - type: scaling-rules
                  label: Scaling Rules
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/shard/properties/scalingRules
                  loader: setValueFromDbDetails|resources/kubedbComMongoDB/spec/shardTopology/shard/storage/resources/requests/storage
                  watcher:
                    func: handleUnit|autoscalingKubedbComMongoDBAutoscaler/spec/storage/shard/scalingRules|scalingRules
                    paths:
                      - schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/shard/properties/scalingRules
                - type: input
                  label: UpperBound
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/shard/properties/upperBound
                  watcher:
                    func: handleUnit|autoscalingKubedbComMongoDBAutoscaler/spec/storage/shard/upperBound
                    paths:
                      - schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/shard/properties/upperBound
                - type: input
                  label: Scaling Threshold
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/shard/properties/scalingThreshold
            - type: switch
              label: Trigger
              fullwidth: true
              init:
                type: func
                value: setTrigger|autoscalingKubedbComMongoDBAutoscaler/spec/storage/configServer/trigger
              schema: temp/properties/storage/properties/configServer/properties/trigger
              watcher:
                func: onTriggerChange|storage/configServer
                paths:
                  - temp/properties/storage/properties/configServer/properties/trigger
            - type: label-element
              label: Expansion Mode (Online/Offline)
              subtitle: For Online Mode enables scaling without downtime by dynamically resizing storage while the database remains operational and Offline Mode performs storage scaling during scheduled downtime, ensuring consistency but requiring database restarts.
            - type: select
              label: Mode
              description: Select how the storage expansion should be handled.
              options:
                - text: Online
                  value: Online
                - text: Offline
                  value: Offline
              schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/configServer/properties/expansionMode
            - type: block-layout
              label: Config Server
              showLabels: true
              elements:
                - type: threshold-input
                  label: UsageThreshold (%)
                  subtitle: Set the threshold percentage of storage usage to trigger scaling.
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/configServer/properties/usageThreshold
                - type: scaling-rules
                  label: Scaling Rules
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/configServer/properties/scalingRules
                  loader: setValueFromDbDetails|resources/kubedbComMongoDB/spec/shardTopology/configServer/storage/resources/requests/storage
                  watcher:
                    func: handleUnit|autoscalingKubedbComMongoDBAutoscaler/spec/storage/configServer/scalingRules|scalingRules
                    paths:
                      - schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/configServer/properties/scalingRules
                - type: input
                  label: UpperBound
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/configServer/properties/upperBound
                  watcher:
                    func: handleUnit|autoscalingKubedbComMongoDBAutoscaler/spec/storage/configServer/upperBound
                    paths:
                      - schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/configServer/properties/upperBound
                - type: input
                  label: Scaling Threshold
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/configServer/properties/scalingThreshold
            - type: switch
              label: Trigger
              fullwidth: true
              init:
                type: func
                value: setTrigger|autoscalingKubedbComMongoDBAutoscaler/spec/storage/hidden/trigger
              schema: temp/properties/storage/properties/hidden/properties/trigger
              watcher:
                func: onTriggerChange|storage/hidden
                paths:
                  - temp/properties/storage/properties/hidden/properties/trigger
            - type: label-element
              label: Expansion Mode (Online/Offline)
              subtitle: For Online Mode enables scaling without downtime by dynamically resizing storage while the database remains operational and Offline Mode performs storage scaling during scheduled downtime, ensuring consistency but requiring database restarts.
            - type: select
              label: Mode
              description: Select how the storage expansion should be handled.
              options:
                - text: Online
                  value: Online
                - text: Offline
                  value: Offline
              schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/hidden/properties/expansionMode
            - type: block-layout
              label: Hidden
              showLabels: true
              if:
                name: isHidden|resources/kubedbComMongoDB/spec/hidden
                type: function
              elements:
                - type: threshold-input
                  label: UsageThreshold (%)
                  subtitle: Set the threshold percentage of storage usage to trigger scaling.
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/hidden/properties/usageThreshold
                - type: scaling-rules
                  label: Scaling Rules
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/hidden/properties/scalingRules
                  loader: setValueFromDbDetails|resources/kubedbComMongoDB/spec/hidden/storage/resources/requests/storage
                  watcher:
                    func: handleUnit|autoscalingKubedbComMongoDBAutoscaler/spec/storage/hidden/scalingRules|scalingRules
                    paths:
                      - schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/hidden/properties/scalingRules
                - type: input
                  label: UpperBound
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/hidden/properties/upperBound
                  watcher:
                    func: handleUnit|autoscalingKubedbComMongoDBAutoscaler/spec/storage/hidden/upperBound
                    paths:
                      - schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/hidden/properties/upperBound
                - type: input
                  label: Scaling Threshold
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/storage/properties/hidden/properties/scalingThreshold
        - type: block-layout
          label: Ops Request Options
          showLabels: true
          if:
            type: function
            name: showOpsRequestOptions
          elements:
            - type: block-layout
              label: Readiness Criteria
              showLabels: true
              elements:
                - type: threshold-input
                  label: Objects Count Diff Percentage
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/opsRequestOptions/properties/readinessCriteria/properties/objectsCountDiffPercentage
                - type: input
                  label: Oplog Max Lag Seconds
                  schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/opsRequestOptions/properties/readinessCriteria/properties/oplogMaxLagSeconds
            - type: time-picker
              label: Timeout
              schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/opsRequestOptions/properties/timeout
            - type: radio
              label: Apply
              init:
                type: func
                value: setApplyToIfReady
              options:
                - text: IfReady (OpsRequest will be applied if database is ready)
                  value: IfReady
                - text: Always (OpsRequest will always be applied)
                  value: Always
              schema: schema/properties/resources/properties/autoscalingKubedbComMongoDBAutoscaler/properties/spec/properties/opsRequestOptions/properties/apply

  - type: single-step-form
    id: binding
    elements:
    - type: switch
      label: Expose Database
      schema: temp/properties/binding
      fullwidth: true
      init:
        type: func
        value: isBindingAlreadyOn
      watcher:
        func: addOrRemoveBinding
        paths:
          - temp/properties/binding