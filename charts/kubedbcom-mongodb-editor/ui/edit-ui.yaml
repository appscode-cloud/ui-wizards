type: multi-step-form
step:
  - type: single-step-form
    id: backupconfiguration
    # label: Backup
    schema: schema/
    elements:
      - type: radio
        label: Schedule a Backup?
        schema: temp/properties/scheduleBackup
        isHorizontal: true
        options:
          - text: 'Yes'
            value: 'yes'
          - text: 'No'
            value: 'no'
        if:
          type: function
          name: showScheduleBackup
        init:
          type: func
          value: initScheduleBackupForEdit
        watcher:
          func: onScheduleBackupChange
          paths:
            - temp/properties/scheduleBackup
      - type: block-layout
        label: Backup Form
        showLabels: false
        loader: initBackupData
        if:
          type: function
          name: showBackupForm
        elements:
          - type: radio
            label: Select Backup Type
            schema: temp/properties/backupType
            isHorizontal: true
            options:
              - text: BackupConfig
                value: BackupConfig
                description: 'Create, Delete or Modify BackupConfig'
              - text: BackupBlueprint
                value: BackupBlueprint
                description: Enable/Disable BackupBlueprint
            if:
              type: function
              name: isBackupDataLoadedTrue
            init:
              type: func
              value: setBackupType
            loader: getTypes
            watcher:
              func: onBackupTypeChange
              paths:
                - temp/properties/backupType
          - type: block-layout
            label: Config
            if:
              type: function
              name: isBackupType|BackupConfig
            elements:
              - type: select
                label: Select Context
                schema: temp/properties/backupConfigContext
                validation:
                  type: required
                loader: getContext
                watcher:
                  func: onContextChange
                  paths:
                    - temp/properties/backupConfigContext
              - type: select
                label: Select BackupConfig
                schema: temp/properties/config
                validation:
                  type: required
                if:
                  type: function
                  name: showConfigList
                loader: getConfigList
                watcher:
                  func: onConfigChange
                  paths:
                    - temp/properties/config
              - type: input
                label: Schedule
                schema: temp/properties/schedule
                validation:
                  type: required
                if:
                  type: function
                  name: showSchedule
                # loader must be computed
                loader: getDefaultSchedule|/resources/coreKubestashComBackupConfiguration/spec/sessions
                watcher:
                  func: onInputChangeSchedule|/resources/coreKubestashComBackupConfiguration/spec/sessions|schedule
                  paths:
                    - temp/properties/schedule
              - type: switch
                label: Paused
                schema: schema/properties/resources/properties/coreKubestashComBackupConfiguration/properties/spec/properties/paused
                if:
                  type: function
                  name: showPause
          - type: block-layout
            label: Blueprint
            if:
              type: function
              name: isBackupType|BackupBlueprint
            elements:
              - type: switch
                label: Enable Backup Blueprint
                schema: temp/properties/blueprintEnabled
                init:
                  type: func
                  value: setBlueprintSwitch
                watcher:
                  func: onBlueprintChange
                  paths:
                    - temp/properties/blueprintEnabled
          - type: block-layout
            label: Archiver
            if:
              type: function
              name: isBackupType|Archiver
            elements:
              - type: switch
                label: Enable Archiver
                schema: temp/properties/archiverEnabled
                init:
                  type: func
                  value: setArchiverSwitch
                watcher:
                  func: onArchiverChange
                  paths:
                    - temp/properties/archiverEnabled
