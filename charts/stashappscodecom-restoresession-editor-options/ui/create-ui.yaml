steps:
- form:
    elements:
    - label:
        text: labels.restoresession.name
      schema:
        $ref: schema#/properties/metadata/properties/release/properties/name
      type: input
    - computed: initNamespace
      disabled: isNamespaceDisabled
      fetch: getResources|core|v1|namespaces
      label:
        text: labels.namespace
      schema:
        $ref: schema#/properties/metadata/properties/release/properties/namespace
      type: select
    - elements:
      - individualItemDisabilityCheck: labelsDisabilityChecker
        isArray: true
        keys:
          label:
            text: labels.key
        label:
          text: labels.restoresession.labels
        schema:
          $ref: schema#/properties/spec/properties/labels
        type: key-value-input-form
        values:
          label:
            text: labels.value
          schema:
            $ref: schema#/properties/spec/properties/labels/additionalProperties
          type: input
      - isArray: true
        keys:
          label:
            text: labels.key
        label:
          text: labels.restoresession.annotations
        schema:
          $ref: schema#/properties/spec/properties/annotations
        type: key-value-input-form
        values:
          label:
            text: labels.value
          schema:
            $ref: schema#/properties/spec/properties/annotations/additionalProperties
          type: input
      - type: select
        label:
          text: labels.restoresession.database
        schema:
          $ref: schema#/properties/spec/properties/target
        fetch: fetchDatabases
      - type: select
        label:
          text: labels.repository.select
        schema:
          $ref: schema#/properties/spec/properties/repository
        fetch: fetchRepositories
        add_new_button:
          label: labels.repository.create
          target: _blank
          url:
            params:
              user: 
                $ref: store#/route/params/user
              cluster: 
                $ref: store#/route/params/cluster
              namespace:
                $ref: model#/metadata/release/namespace
            path: /${user}/${cluster}/stash.appscode.com/v1alpha1/repositories/create?namespace=${namespace}
        refresh: true
      - type: input
        label:
          text: labels.restoresession.snapshot
        schema:
          $ref: schema#/properties/spec/properties/snapshot
      schema:
        $ref: schema#/properties/spec
      type: single-step-form
    type: single-step-form
  id: options
  title: steps.0.label
type: multi-step-form
