steps:
- form:
    elements:
    - label:
        text: labels.restoresession.name
      schema:
        $ref: schema#/properties/metadata/properties/release/properties/name
      type: input
    - computed: initNamespace
      disabled: isNamespaceDisabled
      fetch: getResources|core|v1|namespaces
      label:
        text: labels.namespace
      schema:
        $ref: schema#/properties/metadata/properties/release/properties/namespace
      type: select
    - elements:
      - individualItemDisabilityCheck: labelsDisabilityChecker
        isArray: true
        keys:
          label:
            text: labels.key
        label:
          text: labels.restoresession.labels
        schema:
          $ref: schema#/properties/spec/properties/labels
        type: key-value-input-form
        values:
          label:
            text: labels.value
          schema:
            $ref: schema#/properties/spec/properties/labels/additionalProperties
          type: input
      - isArray: true
        keys:
          label:
            text: labels.key
        label:
          text: labels.restoresession.annotations
        schema:
          $ref: schema#/properties/spec/properties/annotations
        type: key-value-input-form
        values:
          label:
            text: labels.value
          schema:
            $ref: schema#/properties/spec/properties/annotations/additionalProperties
          type: input
      - fetch: fetchDatabases
        label:
          text: labels.restoresession.database
        schema:
          $ref: schema#/properties/spec/properties/target
        type: select
      - add_new_button:
          label: labels.repository.create
          target: _blank
          url:
            params:
              cluster:
                $ref: store#/route/params/cluster
              namespace:
                $ref: model#/metadata/release/namespace
              user:
                $ref: store#/route/params/user
            path: /${user}/${cluster}/stash.appscode.com/v1alpha1/repositories/create?namespace=${namespace}
        fetch: fetchRepositories
        label:
          text: labels.repository.select
        refresh: true
        schema:
          $ref: schema#/properties/spec/properties/repository
        type: select
      - label:
          text: labels.restoresession.snapshot
        schema:
          $ref: schema#/properties/spec/properties/snapshot
        type: input
      - type: single-step-form
        if: showInterimVolumneTemplate
        show_label: true
        label:
          text: labels.interimVolumeTemplate
        schema:
          $ref: schema#/properties/spec/properties/interimVolumeTemplate
        elements:
        - type: select
          label:
            text: labels.storage.class
          schema:
            $ref: schema#/properties/spec/properties/interimVolumeTemplate/properties/spec/properties/storageClassName
          fetch: getStorageClassNames|/spec/interimVolumeTemplate/spec/storageClassName
        - type: input
          label:
            text: labels.storage.size
          schema:
            $ref: schema#/properties/spec/properties/interimVolumeTemplate/properties/spec/properties/resources/properties/requests/properties/storage
      - type: single-step-form
        discriminator:
          customizeRestoreJobRuntimeSettings:
            type: boolean
            default: false
        show_label: true
        label:
          text: Runtime Settings
        elements:
          - type: switch
            label:
              text: labels.runtimeSettings.choise
            schema:
              $ref: discriminator#/properties/customizeRestoreJobRuntimeSettings
          - type: reusable-element
            if: showRuntimeSettingsForm
            alias: database-restore-runtime-settings
            schema:
              $ref: schema#/properties/spec/properties/runtimeSettings
            chart:
              name: uibytebuildersdev-component-database-runtime-settings
              version: v0.4.11
            moduleResolver: fetchJsons
            dataContext:
              namespace:
                $ref: schema#/properties/metadata/properties/release/properties/namespace
      # - discriminator:
      #     customizeRestoreJobRuntimeSettings:
      #       type: string
      #   elements:
      #   - computed: initCustomizeRestoreJobRuntimeSettings
      #     label:
      #       isSubsection: true
      #       text: labels.runtimeSettings.choise
      #     onChange: onCustomizeRestoreJobRuntimeSettingsChange
      #     options:
      #     - text: labels.textYes
      #       value: "yes"
      #     - text: labels.textNo
      #       value: "no"
      #     schema:
      #       $ref: discriminator#/properties/customizeRestoreJobRuntimeSettings
      #     type: radio
      #   - alias: runtime_settings_init
      #     chart:
      #       name: uibytebuildersdev-component-runtime-settings
      #       version: v0.4.11
      #     dataContext:
      #       namespace:
      #         $ref: schema#/properties/metadata/properties/release/properties/namespace
      #     if: showRuntimeForm|yes
      #     moduleResolver: fetchJsons
      #     schema:
      #       $ref: schema#/properties/spec/properties/runtimeSettings
      #     type: reusable-element
      #   type: single-step-form
      schema:
        $ref: schema#/properties/spec
      type: single-step-form
    type: single-step-form
  id: options
  title: steps.0.label
type: multi-step-form
