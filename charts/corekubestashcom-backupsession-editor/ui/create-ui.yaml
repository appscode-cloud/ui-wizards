type: multi-step-form
step:
  - type: single-step-form
    id: basic
    elements:
      - type: select
        if:
          type: function
          name: isApiResolved
        schema: temp/backup
        label: Select Backup
        watcher:
          paths: 
            - temp/backup
          func: clearModel
        loader: getOptions
        options:
          - text: Full-backup
            value: full-backup
          - text: Recent-backup
            value: recent-backup
          - text: Partial-backup
            value: partial-backup
        refresh: true
        validation:
          type: required
      - type: select
        if:
          type: function
          name: isBackupSelected
        schema: temp/selectedSessions
        label: Select Sessions
        multiple: true
        watcher:
          paths:
            - temp/selectedSessions
          func: buildObject
        loader: getSessionOptions
        options:
          - text: Full-backup
            value: full-backup
          - text: Recent-backup
            value: recent-backup
          - text: Partial-backup
            value: partial-backup
        refresh: true
        schema: selectedSessions
        validation:
          type: required


# steps:
# - form:
#     discriminator:
#       backup:
#         type: string
#       initApi:
#         default: false
#         type: boolean
#       selectedSessions:
#         type: Array
#     elements:
#     - computed: init
#       if: returnFalse
#       type: label-element
#     - fetch: getOptions
#       if: isApiResolved
#       label:
#         text: Select Backup
#       onChange: clearModel
#       required: true
#       schema:
#         $ref: discriminator#/backup
#       type: select
#     - fetch: getSessionOptions
#       if: isBackupSelected
#       label:
#         text: Select Sessions
#       onChange: buildObject
#       required: true
#       schema:
#         $ref: discriminator#/selectedSessions
#       type: multiselect
#     type: single-step-form
#   id: basic
#   title: steps.0.label
# type: multi-step-form
