steps:
- form:
    discriminator:
      isResourceLoaded:
        default: false
        type: boolean
    elements:
    - computed: setReleaseNameAndNamespaceAndInitializeValues
      if: returnFalse
      type: input
    - discriminator:
        enabledFeatures:
          type: array
      elements:
      - computed: getFeatureSetDescription
        customClass: mb-20
        label:
          isSubsection: true
        type: label-element
      - computed: getEnabledFeatures
        fetch: fetchFeatureSetOptions
        hasDescription: true
        individualItemDisabilityCheck: disableFeatures
        onChange: onEnabledFeaturesChange
        schema:
          $ref: discriminator#/properties/enabledFeatures
        type: checkbox
      - computed: checkIsResourceLoaded
        if: hideThisElement
        type: input
      - alertInfo:
          show: true
          type: info
        label:
          text: 'Note: Enabling a feature auto enables any prerequisite features'
        type: label-element
      - elements:
        - elements:
          - label:
              text: caCert
            schema:
              $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/cluster/properties/tls/properties/ca/properties/cert
            type: textarea
          - label:
              text: caKey
            schema:
              $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/cluster/properties/tls/properties/ca/properties/key
            type: textarea
          hideForm: true
          label:
            text: Cluster
          show_label: true
          type: single-step-form
        - elements:
          - label:
              text: Nodeport Range
            schema:
              $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/envoy/properties/service/properties/nodeportRange
            type: input
          - label:
              text: Port Range
            schema:
              $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/envoy/properties/service/properties/portRange
            type: input
          label:
            text: Envoy Service Ports
          show_label: true
          type: single-step-form
        - elements:
          - label:
              text: Controller Name
            schema:
              $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/gateway/properties/config/properties/envoyGateway/properties/gateway/properties/controllerName
            type: input
          - label:
              text: enable Gateway Converter?
            schema:
              $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/gateway/properties/gateway-converter/properties/enabled
            type: switch
          - label:
              text: Kubernetes Cluster Domain
            schema:
              $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/gateway/properties/kubernetesClusterDomain
            type: input
          label:
            text: Envoy Gateway
          show_label: true
          type: single-step-form
        - elements:
          - label:
              text: Name
            schema:
              $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/vaultServer/properties/name
            type: input
          - label:
              text: Namespace
            schema:
              $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/vaultServer/properties/namespace
            type: input
          hideForm: true
          label:
            text: Vault Server
          show_label: true
          type: single-step-form
        - elements:
          - elements:
            - label:
                text: Provider
              computed: returnProvider
              fetch: fetchEnum
              schema:
                $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/infra/properties/dns/properties/provider
              type: select
            - elements:
              - label:
                  text: Environment
                schema:
                  $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/infra/properties/dns/properties/auth/properties/azureDNS/properties/environment
                required: true  
                type: input
              - label:
                  text: Hosted Zone Name
                schema:
                  $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/infra/properties/dns/properties/auth/properties/azureDNS/properties/hostedZoneName
                required: true
                type: input
              - label:
                  text: Resource Group Name
                schema:
                  $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/infra/properties/dns/properties/auth/properties/azureDNS/properties/resourceGroupName
                required: true
                type: input
              - label:
                  text: Service Principal App ID
                schema:
                  $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/infra/properties/dns/properties/auth/properties/azureDNS/properties/servicePrincipalAppID
                required: true
                type: input
              - label:
                  text: Service Principal App Password
                inputType: password 
                schema:
                  $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/infra/properties/dns/properties/auth/properties/azureDNS/properties/servicePrincipalAppPassword
                required: true
                type: input
              - label:
                  text: Subscription ID
                schema:
                  $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/infra/properties/dns/properties/auth/properties/azureDNS/properties/subscriptionID
                required: true
                type: input
              - label:
                  text: Tenant ID
                schema:
                  $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/infra/properties/dns/properties/auth/properties/azureDNS/properties/tenantID
                required: true
                type: input
              label:
                text: azureDNS
              if: checkDnsProvider|azureDNS
              type: single-step-form
            - elements:
              - label:
                  text: GOOGLE PROJECT ID
                schema:
                  $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/infra/properties/dns/properties/auth/properties/cloudDNS/properties/GOOGLE_PROJECT_ID
                required: true
                type: input
              - label:
                  text: GOOGLE SERVICE ACCOUNT JSON KEY
                schema:
                  $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/infra/properties/dns/properties/auth/properties/cloudDNS/properties/GOOGLE_SERVICE_ACCOUNT_JSON_KEY
                required: true
                type: input
              label:
                text: cloudDNS
              if: checkDnsProvider|cloudDNS
              type: single-step-form
            - elements:
              - label:
                  text: Base URL
                schema:
                  $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/infra/properties/dns/properties/auth/properties/cloudflare/properties/baseURL
                required: true
                type: input
              - label:
                  text: Token
                schema:
                  $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/infra/properties/dns/properties/auth/properties/cloudflare/properties/token
                required: true
                type: input
              label:
                text: cloudflare
              if: checkDnsProvider|cloudflare
              type: single-step-form
            - elements:
              - label:
                  text: AWS Access Key ID
                schema:
                  $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/infra/properties/dns/properties/auth/properties/route53/properties/AWS_ACCESS_KEY_ID
                required: true
                type: input
              - label:
                  text: AWS Region
                schema:
                  $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/infra/properties/dns/properties/auth/properties/route53/properties/AWS_REGION
                required: true
                type: input
              - label:
                  text: AWS Secret Access Key
                schema:
                  $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/infra/properties/dns/properties/auth/properties/route53/properties/AWS_SECRET_ACCESS_KEY
                required: true
                type: input
              label:
                text: route53
              if: checkDnsProvider|route53
              type: single-step-form
            label:
              text: DNS
            show_label: true
            type: single-step-form
          - label:
              text: Host
            schema:
              $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/infra/properties/host
            type: input
          - label:
              text: Host Type
            fetch: fetchEnum
            schema:
              $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/infra/properties/hostType
            type: select
          - elements:
            - label:
                text: Issuer
              fetch: fetchEnum
              schema:
                $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/infra/properties/tls/properties/issuer
              type: select
            - elements:
              - label:
                  text: Email
                inputType: Email
                schema:
                  $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/infra/properties/tls/properties/acme/properties/email
                required: true
                type: input
              - label:
                  text: Solver
                fetch: fetchEnum
                schema:
                  $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/infra/properties/tls/properties/acme/properties/solver
                required: true
                type: select
              label:
                text: acme
              if: checkIssuer|letsencrypt
              type: single-step-form
            - elements:
              - label:
                  text: caCert
                schema:
                  $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/infra/properties/tls/properties/ca/properties/cert
                required: true
                type: input
              - label:
                  text: caKey
                schema:
                  $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/infra/properties/tls/properties/ca/properties/key
                required: true
                type: input
              label:
                text: ca
              if: checkIssuer|ca
              type: single-step-form
            - elements:
              - label:
                  text: certificateCert
                schema:
                  $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/infra/properties/tls/properties/certificate/properties/cert
                required: true
                type: input
              - label:
                  text: certificateKey
                schema:
                  $ref: schema#/properties/resources/properties/helmToolkitFluxcdIoHelmRelease_service_gateway_presets/properties/spec/properties/values/properties/infra/properties/tls/properties/certificate/properties/key
                required: true
                type: input
              label:
                text: certificate
              if: checkIssuer|external
              type: single-step-form
            label:
              text: TLS
            show_label: true
            type: single-step-form
          label:
            text: Infra
          show_label: true
          type: single-step-form
        type: single-step-form
      type: single-step-form
    type: single-step-form
  id: opscenter-core
  title: steps.0.label
type: multi-step-form
