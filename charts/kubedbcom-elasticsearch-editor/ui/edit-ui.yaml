step:
- elements:
  - if:
      name: showScheduleBackup
      type: function
    init:
      type: func
      value: initScheduleBackupForEdit
    isHorizontal: true
    label: Schedule a Backup?
    options:
    - text: "Yes"
      value: "yes"
    - text: "No"
      value: "no"
    schema: temp/properties/scheduleBackup
    type: radio
    watcher:
      func: onScheduleBackupChange
      paths:
      - temp/properties/scheduleBackup
  - elements:
    - if:
        name: isBackupDataLoadedTrue
        type: function
      init:
        type: func
        value: setBackupType
      isHorizontal: true
      label: Select Backup Type
      loader: getTypes
      options:
      - description: Create, Delete or Modify BackupConfig
        text: BackupConfig
        value: BackupConfig
      - description: Enable/Disable BackupBlueprint
        text: BackupBlueprint
        value: BackupBlueprint
      schema: temp/properties/backupType
      type: radio
      watcher:
        func: onBackupTypeChange
        paths:
        - temp/properties/backupType
    - elements:
      - label: Select Context
        loader: getContext
        schema: temp/properties/backupConfigContext
        type: select
        validation:
          type: required
        watcher:
          func: onContextChange
          paths:
          - temp/properties/backupConfigContext
      - if:
          name: showConfigList
          type: function
        label: Select BackupConfig
        loader: getConfigList
        schema: temp/properties/config
        type: select
        validation:
          type: required
        watcher:
          func: onConfigChange
          paths:
          - temp/properties/config
      - if:
          name: showSchedule
          type: function
        label: Schedule
        loader:
          name: getDefaultSchedule|/resources/coreKubestashComBackupConfiguration/spec/sessions
          watchPaths:
          - temp/properties/config
        schema: temp/properties/schedule
        type: input
        validation:
          type: required
        watcher:
          func: onInputChangeSchedule|/resources/coreKubestashComBackupConfiguration/spec/sessions|schedule
          paths:
          - temp/properties/schedule
      - fullwidth: true
        if:
          name: showPause
          type: function
        init:
          type: func
          value: setPausedValue
        label: Paused
        schema: schema/properties/resources/properties/coreKubestashComBackupConfiguration/properties/spec/properties/paused
        type: switch
        watcher:
          func: setPausedValue
          paths:
          - temp/properties/config
      if:
        name: isBackupType|BackupConfig
        type: function
      label: Config
      type: block-layout
    - elements:
      - fullwidth: true
        init:
          type: func
          value: setBlueprintSwitch
        label: Enable Backup Blueprint
        schema: temp/properties/blueprintEnabled
        subtitle: Use a backup blueprint template to automatically configure backups
          for similar databases
        type: switch
        watcher:
          func: onBlueprintChange
          paths:
          - temp/properties/blueprintEnabled
      if:
        name: isBackupType|BackupBlueprint
        type: function
      label: Blueprint
      type: block-layout
    - elements:
      - fullwidth: true
        init:
          type: func
          value: setArchiverSwitch
        label: Enable Archiver
        schema: temp/properties/archiverEnabled
        type: switch
        watcher:
          func: onArchiverChange
          paths:
          - temp/properties/archiverEnabled
      if:
        name: isBackupType|Archiver
        type: function
      label: Archiver
      type: block-layout
    if:
      name: showBackupForm
      type: function
    label: Backup Form
    loader: initBackupData
    showLabels: false
    type: block-layout
  id: backupconfiguration
  schema: schema/
  type: single-step-form
- elements:
  - label: To update Exporter Resource section click on Create OpsRequest
    type: label-element
  - init:
      type: func
      value: getOpsRequestUrl|scale-vertically
    label: Create OpsRequest
    schema: temp/properties/opsRequestUrl
    type: anchor
  - fullwidth: true
    init:
      type: func
      value: isValueExistInModel|/resources/kubedbComElasticsearch/spec/monitor
    label: Enable Monitoring
    schema: temp/properties/enableMonitoring
    type: switch
    watcher:
      func: onEnableMonitoringChange
      paths:
      - temp/properties/enableMonitoring
  - elements:
    - init:
        type: static
        value: prometheus.io/operator
      isHorizontal: true
      label: Select a Monitoring Method
      options:
      - description: Inject metric exporter sidecar and creates a ServiceMonitor
        text: Prometheus Operator
        value: prometheus.io/operator
      - description: Injects the metric exporter sidecar and let you customize ServiceMonitor
        text: Custom ServiceMonitor
        value: prometheus.io
      - description: Inject metric exporter sidecar and add Prometheus annotations
          to the stats Service
        text: Custom Scrapper
        value: prometheus.io/builtin
      schema: schema/properties/resources/properties/kubedbComElasticsearch/properties/spec/properties/monitor/properties/agent
      type: radio
      watcher:
        func: onAgentChange
        paths:
        - schema/properties/resources/properties/kubedbComElasticsearch/properties/spec/properties/monitor/properties/agent
    - elements:
      - label: Scrapping Interval
        schema: schema/properties/resources/properties/kubedbComElasticsearch/properties/spec/properties/monitor/properties/prometheus/properties/serviceMonitor/properties/interval
        type: input
      if:
        name: isEqualToModelPathValue|prometheus.io/operator|/resources/kubedbComElasticsearch/spec/monitor/agent
        type: function
      label: ServiceMonitor Configuration
      showLabels: true
      type: block-layout
    - elements:
      - buttonClass: is-light is-outlined
        elements:
        - fullwidth: true
          label: Honor labels
          schema: honorLabels
          type: switch
        - label: Interval
          schema: interval
          type: input
          validation:
            type: required
        - label: Path
          schema: path
          type: input
          validation:
            type: required
        - label: Port
          schema: port
          type: input
          validation:
            type: required
        label: Endpoints
        schema: schema/properties/resources/properties/monitoringCoreosComServiceMonitor/properties/spec/properties/endpoints
        type: array-object-form
      - if:
          name: returnFalse
          type: function
        label: Match Namespaces
        loader: getResources|core|v1|namespaces
        multiple: true
        schema: schema/properties/resources/properties/monitoringCoreosComServiceMonitor/properties/spec/properties/namespaceSelector/properties/matchNames
        type: select
      - elements:
        - label: Labels
          schema: schema/properties/resources/properties/monitoringCoreosComServiceMonitor/properties/spec/properties/selector/properties/matchLabels
          type: object-item
        if:
          name: returnFalse
          type: function
        showLabels: false
        type: block-layout
      if:
        name: isEqualToModelPathValue|prometheus.io|/resources/kubedbComElasticsearch/spec/monitor/agent
        type: function
      label: Service Monitor
      showLabels: true
      type: block-layout
    - buttonClass: is-light is-outlined
      if:
        name: isEqualToModelPathValue|prometheus.io|/resources/kubedbComElasticsearch/spec/monitor/agent
        type: function
      label: Labels
      schema: schema/properties/resources/properties/monitoringCoreosComServiceMonitor/properties/metadata/properties/labels
      type: object-item
    - label: Exporter Configuration
      schema: ""
      type: label-element
    - fullwidth: true
      init:
        type: static
        value: true
      label: Customize Exporter Sidecar
      schema: temp/properties/customizeExporter
      type: switch
      watcher:
        func: onCustomizeExporterChange
        paths:
        - temp/properties/customizeExporter
    - elements:
      - if:
          name: returnFalse
          type: function
        label: Resources
        schema: schema/properties/resources/properties/kubedbComElasticsearch/properties/spec/properties/monitor/properties/prometheus/properties/exporter/properties/resources
        type: machine-compare
      - label: Security Context
        schema: ""
        type: label-element
      - label: Run as User
        schema: schema/properties/resources/properties/kubedbComElasticsearch/properties/spec/properties/monitor/properties/prometheus/properties/exporter/properties/securityContext/properties/runAsUser
        type: input
      - label: Run as Group
        schema: schema/properties/resources/properties/kubedbComElasticsearch/properties/spec/properties/monitor/properties/prometheus/properties/exporter/properties/securityContext/properties/runAsGroup
        type: input
      - label: Port
        schema: schema/properties/resources/properties/kubedbComElasticsearch/properties/spec/properties/monitor/properties/prometheus/properties/exporter/properties/port
        type: input
      - buttonClass: is-light is-outlined
        element:
          label: Args
          type: input
        init:
          type: static
          value:
          - --compatible-mode
        label: Args
        schema: schema/properties/resources/properties/kubedbComElasticsearch/properties/spec/properties/monitor/properties/prometheus/properties/exporter/properties/args
        type: array-item-form
      - elements:
        - buttonClass: is-light is-outlined
          elements:
          - label: Name
            schema: name
            type: input
            validation:
              type: required
          - init:
              type: func
              value: setValueFrom
            label: Value From
            options:
            - text: Input
              value: input
            - text: Secret
              value: secret
            - text: ConfigMap
              value: configMap
            schema: temp/properties/valueFromType
            type: radio
            validation:
              type: required
            watcher:
              func: onValueFromChange
              paths:
              - temp/properties/valueFromType
          - if:
              name: isEqualToTemp|input
              type: function
            label: Value
            schema: value
            type: input
            validation:
              type: required
          - if:
              name: isEqualToTemp|configMap
              type: function
            label: ConfigMap Name
            loader:
              name: resourceNames|core|v1|configmaps
              watchPaths:
              - schema/metadata/release/namespace
            schema: valueFrom/properties/configMapKeyRef/properties/name
            type: select
            validation:
              type: required
          - if:
              name: isEqualToTemp|configMap
              type: function
            label: ConfigMap Key
            loader:
              name: getConfigMapKeys
              watchPaths:
              - schema/resources/kubedbComElasticsearch/spec/monitor/prometheus/exporter/env/dynamicIndex/valueFrom/configMapKeyRef/name
              - schema/metadata/release/namespace
            schema: valueFrom/properties/configMapKeyRef/properties/key
            type: select
          - if:
              name: isEqualToTemp|secret
              type: function
            label: Secret Name
            loader:
              name: getSecrets
              watchPaths:
              - schema/metadata/release/namespace
            schema: valueFrom/properties/secretKeyRef/properties/name
            type: select
            validation:
              type: required
          - if:
              name: isEqualToTemp|secret
              type: function
            label: Secret Key
            loader:
              name: getSecretKeys
              watchPaths:
              - schema/resources/kubedbComElasticsearch/spec/monitor/prometheus/exporter/env/dynamicIndex/valueFrom/secretKeyRef/name
              - schema/metadata/release/namespace
            schema: valueFrom/properties/secretKeyRef/properties/key
            type: select
          init:
            type: func
            value: initEnvArray
          label: Environment Variables
          schema: temp/properties/env
          type: array-object-form
          watcher:
            func: onEnvArrayChange
            paths:
            - temp/properties/env
        label: Metadata
        showLabels: false
        type: block-layout
      if:
        name: showCustomizeExporterSection
        type: function
      label: Customer Exporter Section
      loader: setMetadata
      showLabels: false
      type: block-layout
    if:
      name: showMonitoringSection
      type: function
    type: block-layout
  id: monitoring
  loader: initMonitoring
  type: single-step-form
- elements:
  - elements:
    - fullwidth: true
      if:
        name: dbTypeEqualsTo|node
        type: function
      init:
        type: func
        value: setTrigger|autoscalingKubedbComElasticsearchAutoscaler/spec/compute/node/trigger
      label: Trigger
      schema: temp/properties/compute/properties/node/properties/trigger
      type: switch
      watcher:
        func: onTriggerChange|compute/node
        paths:
        - temp/properties/compute/properties/node/properties/trigger
    - if:
        name: dbTypeEqualsTo|node
        type: function
      label: Pod lifetime threshold
      subtitle: Specifies the duration a pod can exist before using considered for
        scaling decisions, ensuring resource optimization and workload stability
      type: label-element
    - customClass: width-300
      if:
        name: dbTypeEqualsTo|node
        type: function
      label: Pod LifeTime Threshold (e.g., 10m 30s)
      schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/compute/properties/node/properties/podLifeTimeThreshold
      type: input
    - elements:
      - customClass: width-300
        label: ResourceDiff Percentage
        schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/compute/properties/node/properties/resourceDiffPercentage
        type: threshold-input
      - label: Resource Configuration
        subtitle: Define minimum and maximum allowed resources to ensure optimal database
          performance
        type: label-element
      - elements:
        - header: Minimum Resource Limit
          if:
            name: hasAnnotations
            type: function
          init:
            type: func
            value: setAllowedMachine|node|min
          label: Min Allowed Profile
          loader:
            name: getMachines|node|min
            watchPaths:
            - temp/properties/topologyMachines
            - temp/properties/allowedMachine-node-max
          schema: temp/properties/allowedMachine-node-min
          type: machine-compare
          watcher:
            func: onMachineChange|node
            paths:
            - temp/properties/allowedMachine-node-min
        - elements:
          - label: Cpu
            schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/compute/properties/node/properties/minAllowed/properties/cpu
            type: input-compare
          - label: Memory
            schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/compute/properties/node/properties/minAllowed/properties/memory
            type: input-compare
          fixedBlock: true
          if:
            name: hasNoAnnotations
            type: function
          label: Min Allowed
          showLabels: true
          type: block-layout
        - header: Maximum Resource Limit
          if:
            name: hasAnnotations
            type: function
          init:
            type: func
            value: setAllowedMachine|node|max
          label: Max Allowed Profile
          loader:
            name: getMachines|node|max
            watchPaths:
            - temp/properties/topologyMachines
            - temp/properties/allowedMachine-node-min
          schema: temp/properties/allowedMachine-node-max
          type: machine-compare
          watcher:
            func: onMachineChange|node
            paths:
            - temp/properties/allowedMachine-node-max
        - elements:
          - label: Cpu
            schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/compute/properties/node/properties/maxAllowed/properties/cpu
            type: input-compare
          - label: Memory
            schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/compute/properties/node/properties/maxAllowed/properties/memory
            type: input-compare
          fixedBlock: true
          if:
            name: hasNoAnnotations
            type: function
          label: Max Allowed
          showLabels: true
          type: block-layout
        showLabels: false
        type: block-layout
      - label: Controlled Resources
        loader: setControlledResources|compute/node
        multiple: true
        schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/compute/properties/node/properties/controlledResources
        type: select
      if:
        name: dbTypeEqualsTo|node
        type: function
      label: Node
      showLabels: true
      type: block-layout
    - elements:
      - fullwidth: true
        init:
          type: func
          value: setTrigger|autoscalingKubedbComElasticsearchAutoscaler/spec/compute/data/trigger
        label: Trigger
        schema: temp/properties/compute/properties/data/properties/trigger
        type: switch
        watcher:
          func: onTriggerChange|compute/data
          paths:
          - temp/properties/compute/properties/data/properties/trigger
      - label: Pod lifetime threshold
        subtitle: Specifies the duration a pod can exist before using considered for
          scaling decisions, ensuring resource optimization and workload stability
        type: label-element
      - customClass: width-300
        label: Pod LifeTime Threshold (e.g., 10m 30s)
        schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/compute/properties/data/properties/podLifeTimeThreshold
        type: input
      - elements:
        - customClass: width-300
          label: ResourceDiff Percentage
          schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/compute/properties/data/properties/resourceDiffPercentage
          type: threshold-input
        - label: Resource Configuration
          subtitle: Define minimum and maximum allowed resources to ensure optimal
            database performance
          type: label-element
        - elements:
          - header: Minimum Resource Limit
            if:
              name: hasAnnotations
              type: function
            init:
              type: func
              value: setAllowedMachine|data|min
            label: Min Allowed Profile
            loader:
              name: getMachines|data|min
              watchPaths:
              - temp/properties/topologyMachines
              - temp/properties/allowedMachine-data-max
            schema: temp/properties/allowedMachine-data-min
            type: machine-compare
            watcher:
              func: onMachineChange|data
              paths:
              - temp/properties/allowedMachine-data-min
          - elements:
            - label: Cpu
              schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/compute/properties/data/properties/minAllowed/properties/cpu
              type: input-compare
            - label: Memory
              schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/compute/properties/data/properties/minAllowed/properties/memory
              type: input-compare
            fixedBlock: true
            if:
              name: hasNoAnnotations
              type: function
            label: Min Allowed
            showLabels: true
            type: block-layout
          - header: Maximum Resource Limit
            if:
              name: hasAnnotations
              type: function
            init:
              type: func
              value: setAllowedMachine|data|max
            label: Max Allowed Profile
            loader:
              name: getMachines|data|max
              watchPaths:
              - temp/properties/topologyMachines
              - temp/properties/allowedMachine-data-min
            schema: temp/properties/allowedMachine-data-max
            type: machine-compare
            watcher:
              func: onMachineChange|data
              paths:
              - temp/properties/allowedMachine-data-max
          - elements:
            - label: Cpu
              schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/compute/properties/data/properties/maxAllowed/properties/cpu
              type: input-compare
            - label: Memory
              schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/compute/properties/data/properties/maxAllowed/properties/memory
              type: input-compare
            fixedBlock: true
            if:
              name: hasNoAnnotations
              type: function
            label: Max Allowed
            showLabels: true
            type: block-layout
          showLabels: false
          type: block-layout
        - label: Controlled Resources
          loader: setControlledResources|compute/data
          multiple: true
          schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/compute/properties/data/properties/controlledResources
          type: select
        label: Data
        showLabels: true
        type: block-layout
      - fullwidth: true
        init:
          type: func
          value: setTrigger|autoscalingKubedbComElasticsearchAutoscaler/spec/compute/ingest/trigger
        label: Trigger
        schema: temp/properties/compute/properties/ingest/properties/trigger
        type: switch
        watcher:
          func: onTriggerChange|compute/ingest
          paths:
          - temp/properties/compute/properties/ingest/properties/trigger
      - label: Pod lifetime threshold
        subtitle: Specifies the duration a pod can exist before using considered for
          scaling decisions, ensuring resource optimization and workload stability
        type: label-element
      - customClass: width-300
        label: Pod LifeTime Threshold (e.g., 10m 30s)
        schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/compute/properties/ingest/properties/podLifeTimeThreshold
        type: input
      - elements:
        - customClass: width-300
          label: ResourceDiff Percentage
          schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/compute/properties/ingest/properties/resourceDiffPercentage
          type: threshold-input
        - label: Resource Configuration
          subtitle: Define minimum and maximum allowed resources to ensure optimal
            database performance
          type: label-element
        - elements:
          - header: Minimum Resource Limit
            if:
              name: hasAnnotations
              type: function
            init:
              type: func
              value: setAllowedMachine|ingest|min
            label: Min Allowed Profile
            loader:
              name: getMachines|ingest|min
              watchPaths:
              - temp/properties/topologyMachines
              - temp/properties/allowedMachine-ingest-max
            schema: temp/properties/allowedMachine-ingest-min
            type: machine-compare
            watcher:
              func: onMachineChange|ingest
              paths:
              - temp/properties/allowedMachine-ingest-min
          - elements:
            - label: Cpu
              schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/compute/properties/ingest/properties/minAllowed/properties/cpu
              type: input-compare
            - label: Memory
              schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/compute/properties/ingest/properties/minAllowed/properties/memory
              type: input-compare
            fixedBlock: true
            if:
              name: hasNoAnnotations
              type: function
            label: Min Allowed
            showLabels: true
            type: block-layout
          - header: Maximum Resource Limit
            if:
              name: hasAnnotations
              type: function
            init:
              type: func
              value: setAllowedMachine|ingest|max
            label: Max Allowed Profile
            loader:
              name: getMachines|ingest|max
              watchPaths:
              - temp/properties/topologyMachines
              - temp/properties/allowedMachine-ingest-min
            schema: temp/properties/allowedMachine-ingest-max
            type: machine-compare
            watcher:
              func: onMachineChange|ingest
              paths:
              - temp/properties/allowedMachine-ingest-max
          - elements:
            - label: Cpu
              schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/compute/properties/ingest/properties/maxAllowed/properties/cpu
              type: input-compare
            - label: Memory
              schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/compute/properties/ingest/properties/maxAllowed/properties/memory
              type: input-compare
            fixedBlock: true
            if:
              name: hasNoAnnotations
              type: function
            label: Max Allowed
            showLabels: true
            type: block-layout
          showLabels: false
          type: block-layout
        - label: Controlled Resources
          loader: setControlledResources|compute/ingest
          multiple: true
          schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/compute/properties/ingest/properties/controlledResources
          type: select
        label: Ingest
        showLabels: true
        type: block-layout
      - fullwidth: true
        init:
          type: func
          value: setTrigger|autoscalingKubedbComElasticsearchAutoscaler/spec/compute/master/trigger
        label: Trigger
        schema: temp/properties/compute/properties/master/properties/trigger
        type: switch
        watcher:
          func: onTriggerChange|compute/master
          paths:
          - temp/properties/compute/properties/master/properties/trigger
      - label: Pod lifetime threshold
        subtitle: Specifies the duration a pod can exist before using considered for
          scaling decisions, ensuring resource optimization and workload stability
        type: label-element
      - customClass: width-300
        label: Pod LifeTime Threshold (e.g., 10m 30s)
        schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/compute/properties/master/properties/podLifeTimeThreshold
        type: input
      - elements:
        - customClass: width-300
          label: ResourceDiff Percentage
          schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/compute/properties/master/properties/resourceDiffPercentage
          type: threshold-input
        - label: Resource Configuration
          subtitle: Define minimum and maximum allowed resources to ensure optimal
            database performance
          type: label-element
        - elements:
          - header: Minimum Resource Limit
            if:
              name: hasAnnotations
              type: function
            init:
              type: func
              value: setAllowedMachine|master|min
            label: Min Allowed Profile
            loader:
              name: getMachines|master|min
              watchPaths:
              - temp/properties/topologyMachines
              - temp/properties/allowedMachine-master-max
            schema: temp/properties/allowedMachine-master-min
            type: machine-compare
            watcher:
              func: onMachineChange|master
              paths:
              - temp/properties/allowedMachine-master-min
          - elements:
            - label: Cpu
              schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/compute/properties/master/properties/minAllowed/properties/cpu
              type: input-compare
            - label: Memory
              schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/compute/properties/master/properties/minAllowed/properties/memory
              type: input-compare
            fixedBlock: true
            if:
              name: hasNoAnnotations
              type: function
            label: Min Allowed
            showLabels: true
            type: block-layout
          - header: Maximum Resource Limit
            if:
              name: hasAnnotations
              type: function
            init:
              type: func
              value: setAllowedMachine|master|max
            label: Max Allowed Profile
            loader:
              name: getMachines|master|max
              watchPaths:
              - temp/properties/topologyMachines
              - temp/properties/allowedMachine-master-min
            schema: temp/properties/allowedMachine-master-max
            type: machine-compare
            watcher:
              func: onMachineChange|master
              paths:
              - temp/properties/allowedMachine-master-max
          - elements:
            - label: Cpu
              schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/compute/properties/master/properties/maxAllowed/properties/cpu
              type: input-compare
            - label: Memory
              schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/compute/properties/master/properties/maxAllowed/properties/memory
              type: input-compare
            fixedBlock: true
            if:
              name: hasNoAnnotations
              type: function
            label: Max Allowed
            showLabels: true
            type: block-layout
          showLabels: false
          type: block-layout
        - label: Controlled Resources
          loader: setControlledResources|compute/master
          multiple: true
          schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/compute/properties/master/properties/controlledResources
          type: select
        label: Master
        showLabels: true
        type: block-layout
      if:
        name: dbTypeEqualsTo|topology
        type: function
      showLabels: false
      type: block-layout
    - elements:
      - label: Select NodeTopology
        loader: fetchNodeTopology
        schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/compute/properties/nodeTopology/properties/name
        type: select
      - if:
          name: isNodeTopologySelected
          type: function
        label: Scale Up DiffPercentage
        schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/compute/properties/nodeTopology/properties/scaleUpDiffPercentage
        type: threshold-input
      - if:
          name: isNodeTopologySelected
          type: function
        label: Scale Down DiffPercentage
        schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/compute/properties/nodeTopology/properties/scaleDownDiffPercentage
        type: threshold-input
      if:
        name: hasNoAnnotations
        type: function
      label: NodeTopology
      showLabels: true
      type: block-layout
    - elements:
      - label: Timeout
        schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/opsRequestOptions/properties/timeout
        type: time-picker
      - init:
          type: func
          value: setApplyToIfReady
        label: Apply
        options:
        - text: IfReady (OpsRequest will be applied if database is ready)
          value: IfReady
        - text: Always (OpsRequest will always be applied)
          value: Always
        schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/opsRequestOptions/properties/apply
        type: radio
      if:
        name: showOpsRequestOptions
        type: function
      label: Ops Request Options
      showLabels: true
      type: block-layout
    loader: fetchTopologyMachines
    showLabels: false
    type: block-layout
  id: compute-autoscaler
  loader: getDbDetails
  type: single-step-form
- elements:
  - elements:
    - fullwidth: true
      if:
        name: dbTypeEqualsTo|node
        type: function
      init:
        type: func
        value: setTrigger|autoscalingKubedbComElasticsearchAutoscaler/spec/storage/node/trigger
      label: Trigger
      schema: temp/properties/storage/properties/node/properties/trigger
      type: switch
      watcher:
        func: onTriggerChange|storage/node
        paths:
        - temp/properties/storage/properties/node/properties/trigger
    - if:
        name: dbTypeEqualsTo|node
        type: function
      label: Expansion Mode (Online/Offline)
      subtitle: For Online Mode enables scaling without downtime by dynamically resizing
        storage while the database remains operational and Offline Mode performs storage
        scaling during scheduled downtime, ensuring consistency but requiring database
        restarts.
      type: label-element
    - description: Select how the storage expansion should be handled.
      if:
        name: dbTypeEqualsTo|node
        type: function
      label: Mode
      options:
      - text: Online
        value: Online
      - text: Offline
        value: Offline
      schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/storage/properties/node/properties/expansionMode
      type: select
    - elements:
      - label: UsageThreshold (%)
        schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/storage/properties/node/properties/usageThreshold
        subtitle: Set the threshold percentage of storage usage to trigger scaling.
        type: threshold-input
      - label: Scaling Rules
        loader: setValueFromDbDetails|resources/kubedbComElasticsearch/spec/storage/resources/requests/storage
        schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/storage/properties/node/properties/scalingRules
        type: scaling-rules
        watcher:
          func: handleUnit|autoscalingKubedbComElasticsearchAutoscaler/spec/storage/node/scalingRules|scalingRules
          paths:
          - schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/storage/properties/node/properties/scalingRules
      - label: UpperBound
        schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/storage/properties/node/properties/upperBound
        type: input
        watcher:
          func: handleUnit|autoscalingKubedbComElasticsearchAutoscaler/spec/storage/node/upperBound
          paths:
          - schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/storage/properties/node/properties/upperBound
      if:
        name: dbTypeEqualsTo|node
        type: function
      label: Node
      showLabels: true
      type: block-layout
    - elements:
      - fullwidth: true
        init:
          type: func
          value: setTrigger|autoscalingKubedbComElasticsearchAutoscaler/spec/storage/data/trigger
        label: Trigger
        schema: temp/properties/storage/properties/data/properties/trigger
        type: switch
        watcher:
          func: onTriggerChange|storage/data
          paths:
          - temp/properties/storage/properties/data/properties/trigger
      - label: Expansion Mode (Online/Offline)
        subtitle: For Online Mode enables scaling without downtime by dynamically
          resizing storage while the database remains operational and Offline Mode
          performs storage scaling during scheduled downtime, ensuring consistency
          but requiring database restarts.
        type: label-element
      - description: Select how the storage expansion should be handled.
        label: Mode
        options:
        - text: Online
          value: Online
        - text: Offline
          value: Offline
        schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/storage/properties/data/properties/expansionMode
        type: select
      - elements:
        - label: UsageThreshold (%)
          schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/storage/properties/data/properties/usageThreshold
          subtitle: Set the threshold percentage of storage usage to trigger scaling.
          type: threshold-input
        - label: Scaling Rules
          loader: setValueFromDbDetails|resources/kubedbComElasticsearch/spec/topology/data/storage/resources/requests/storage
          schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/storage/properties/data/properties/scalingRules
          type: scaling-rules
          watcher:
            func: handleUnit|autoscalingKubedbComElasticsearchAutoscaler/spec/storage/data/scalingRules|scalingRules
            paths:
            - schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/storage/properties/data/properties/scalingRules
        - label: UpperBound
          schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/storage/properties/data/properties/upperBound
          type: input
          watcher:
            func: handleUnit|autoscalingKubedbComElasticsearchAutoscaler/spec/storage/data/upperBound
            paths:
            - schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/storage/properties/data/properties/upperBound
        label: Data
        showLabels: true
        type: block-layout
      - fullwidth: true
        init:
          type: func
          value: setTrigger|autoscalingKubedbComElasticsearchAutoscaler/spec/storage/ingest/trigger
        label: Trigger
        schema: temp/properties/storage/properties/ingest/properties/trigger
        type: switch
        watcher:
          func: onTriggerChange|storage/ingest
          paths:
          - temp/properties/storage/properties/ingest/properties/trigger
      - label: Expansion Mode (Online/Offline)
        subtitle: For Online Mode enables scaling without downtime by dynamically
          resizing storage while the database remains operational and Offline Mode
          performs storage scaling during scheduled downtime, ensuring consistency
          but requiring database restarts.
        type: label-element
      - description: Select how the storage expansion should be handled.
        label: Mode
        options:
        - text: Online
          value: Online
        - text: Offline
          value: Offline
        schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/storage/properties/ingest/properties/expansionMode
        type: select
      - elements:
        - label: UsageThreshold (%)
          schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/storage/properties/ingest/properties/usageThreshold
          subtitle: Set the threshold percentage of storage usage to trigger scaling.
          type: threshold-input
        - label: Scaling Rules
          loader: setValueFromDbDetails|resources/kubedbComElasticsearch/spec/topology/ingest/storage/resources/requests/storage
          schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/storage/properties/ingest/properties/scalingRules
          type: scaling-rules
          watcher:
            func: handleUnit|autoscalingKubedbComElasticsearchAutoscaler/spec/storage/ingest/scalingRules|scalingRules
            paths:
            - schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/storage/properties/ingest/properties/scalingRules
        - label: UpperBound
          schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/storage/properties/ingest/properties/upperBound
          type: input
          watcher:
            func: handleUnit|autoscalingKubedbComElasticsearchAutoscaler/spec/storage/ingest/upperBound
            paths:
            - schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/storage/properties/ingest/properties/upperBound
        label: Ingest
        showLabels: true
        type: block-layout
      - fullwidth: true
        init:
          type: func
          value: setTrigger|autoscalingKubedbComElasticsearchAutoscaler/spec/storage/master/trigger
        label: Trigger
        schema: temp/properties/storage/properties/master/properties/trigger
        type: switch
        watcher:
          func: onTriggerChange|storage/master
          paths:
          - temp/properties/storage/properties/master/properties/trigger
      - label: Expansion Mode (Online/Offline)
        subtitle: For Online Mode enables scaling without downtime by dynamically
          resizing storage while the database remains operational and Offline Mode
          performs storage scaling during scheduled downtime, ensuring consistency
          but requiring database restarts.
        type: label-element
      - description: Select how the storage expansion should be handled.
        label: Mode
        options:
        - text: Online
          value: Online
        - text: Offline
          value: Offline
        schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/storage/properties/master/properties/expansionMode
        type: select
      - elements:
        - label: UsageThreshold (%)
          schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/storage/properties/master/properties/usageThreshold
          subtitle: Set the threshold percentage of storage usage to trigger scaling.
          type: threshold-input
        - label: Scaling Rules
          loader: setValueFromDbDetails|resources/kubedbComElasticsearch/spec/topology/master/storage/resources/requests/storage
          schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/storage/properties/master/properties/scalingRules
          type: scaling-rules
          watcher:
            func: handleUnit|autoscalingKubedbComElasticsearchAutoscaler/spec/storage/master/scalingRules|scalingRules
            paths:
            - schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/storage/properties/master/properties/scalingRules
        - label: UpperBound
          schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/storage/properties/master/properties/upperBound
          type: input
          watcher:
            func: handleUnit|autoscalingKubedbComElasticsearchAutoscaler/spec/storage/master/upperBound
            paths:
            - schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/storage/properties/master/properties/upperBound
        label: Master
        showLabels: true
        type: block-layout
      if:
        name: dbTypeEqualsTo|topology
        type: function
      showLabels: false
      type: block-layout
    - elements:
      - label: Timeout
        schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/opsRequestOptions/properties/timeout
        type: time-picker
      - init:
          type: func
          value: setApplyToIfReady
        label: Apply
        options:
        - text: IfReady (OpsRequest will be applied if database is ready)
          value: IfReady
        - text: Always (OpsRequest will always be applied)
          value: Always
        schema: schema/properties/resources/properties/autoscalingKubedbComElasticsearchAutoscaler/properties/spec/properties/opsRequestOptions/properties/apply
        type: radio
      if:
        name: showOpsRequestOptions
        type: function
      label: Ops Request Options
      showLabels: true
      type: block-layout
    showLabels: false
    type: block-layout
  id: storage-autoscaler
  loader: getDbDetails
  type: single-step-form
- elements:
  - fullwidth: true
    init:
      type: func
      value: isBindingAlreadyOn
    label: Expose Database
    schema: temp/properties/binding
    type: switch
    watcher:
      func: addOrRemoveBinding
      paths:
      - temp/properties/binding
  id: binding
  type: single-step-form
type: multi-step-form
