step:
- elements:
  - hasGroup: isRancherManaged
    if:
      name: isConsole
      type: function
    label: Select Namespace
    loader:
      name: fetchNamespaces
      watchPaths:
      - temp/properties/nameSpaceApi
    schema: schema/properties/metadata/properties/release/properties/namespace
    type: select
  - if:
      name: isConsole
      type: function
    label: Name
    schema: schema/properties/metadata/properties/release/properties/name
    type: input
  - elements:
    - label: ""
      subtitle: Configure the backup repository and snapshot to restore your data
        from
      type: label-element
    - disableUnselect: true
      label: Repository
      loader: getRepositories
      refresh: true
      schema: temp/properties/repository
      subtitle: Select the repository where your backup snapshots are stored
      type: select
      validation:
        type: required
      watcher:
        func: onRepoChange
        paths:
        - temp/properties/repository
    - disableUnselect: true
      label: Snapshot
      loader:
        name: getSnapshots
        watchPaths:
        - temp/properties/repository
      refresh: true
      schema: schema/properties/spec/properties/dataSource/properties/snapshot
      subtitle: Choose a point-in-time backup snapshot to restore from
      type: select
      watcher:
        func: onSnapChange
        paths:
        - schema/properties/spec/properties/dataSource/properties/snapshot
    - if:
        name: isConsole
        type: function
      label: Addon Name
      loader:
        name: getAddons
        watchPaths:
        - schema/properties/spec/properties/dataSource/properties/snapshot
      refresh: true
      schema: schema/properties/spec/properties/addon/properties/name
      subtitle: Select the restore addon to use
      type: select
      watcher:
        func: clearAddon
        paths:
        - schema/properties/spec/properties/dataSource/properties/snapshot
    - label: Additional Parameters
      schema: temp/properties/params
      type: textarea
      watcher:
        func: onParameterChange
        paths:
        - temp/properties/params
    fixedBlock: true
    label: Restore Configuration
    loader: initMetadata
    showLabels: true
    type: block-layout
  - elements:
    - label: Target Resource Configuration
      subtitle: Specify the Kubernetes resource where you want to restore the data
      type: label-element
    - if:
        name: showGroupKind
        type: function
      label: Api Group
      loader: getApiGroup
      schema: schema/properties/spec/properties/target/properties/apiGroup
      subtitle: Select the API group of the target resource (e.g., apps, kubedb.com)
      type: select
    - if:
        name: showGroupKind
        type: function
      label: Kind
      loader:
        name: getKinds
        watchPaths:
        - schema/properties/spec/properties/target/properties/apiGroup
        - schema/properties/spec/properties/dataSource/properties/snapshot
      schema: schema/properties/spec/properties/target/properties/kind
      subtitle: Select the resource type (e.g., Deployment, StatefulSet, MongoDB,
        PostgreSQL)
      type: select
      watcher:
        func: setVersion
        paths:
        - schema/properties/spec/properties/target/properties/kind
        - schema/properties/spec/properties/target/properties/apiGroup
    - hasGroup: isRancherManaged
      label: Namespace
      loader: fetchNamespaces
      schema: schema/properties/spec/properties/target/properties/namespace
      subtitle: Select the namespace where the target resource exists
      type: select
      watcher:
        func: fetchNamespaces
        paths:
        - temp/properties/nameSpaceApi
    - label: Resource Name
      loader:
        name: getTargetName
        watchPaths:
        - schema/properties/spec/properties/target/properties/apiGroup
        - schema/properties/spec/properties/target/properties/namespace
        - schema/properties/spec/properties/target/properties/kind
      schema: schema/properties/spec/properties/target/properties/name
      subtitle: Select the specific resource to restore to
      type: select
    if:
      name: isConsole
      type: function
    label: Restore Target
    showLabels: true
    type: block-layout
  id: options
  loader: init
  type: single-step-form
type: multi-step-form
