type: multi-step-form
step:
  - type: single-step-form
    id: storage-autoscaler
    title: steps.1.label
    elements:
    - type: block-layout
      showLabels: false
      elements:
        - type: block-layout
          showLabels: false
          elements:
            - type: block-layout
              label: Historicals
              showLabels: true
              elements:
                - type: select
                  label: Trigger
                  init:
                    type: func
                    value: setTrigger|autoscalingKubedbComDruidAutoscaler/spec/storage/historicals/trigger
                  options:
                    - text: 'On'
                      value: 'On'
                    - text: 'Off'
                      value: 'Off'
                  schema: schema/properties/resources/properties/autoscalingKubedbComDruidAutoscaler/properties/spec/properties/storage/properties/historicals/properties/trigger
                - type: select
                  label: Expansion Mode
                  options:
                    - text: Online
                      value: Online
                    - text: Offline
                      value: Offline
                  schema: schema/properties/resources/properties/autoscalingKubedbComDruidAutoscaler/properties/spec/properties/storage/properties/historicals/properties/expansionMode
                - type: input
                  label: UsageThreshold (%)
                  schema: schema/properties/resources/properties/autoscalingKubedbComDruidAutoscaler/properties/spec/properties/storage/properties/historicals/properties/usageThreshold
                - type: array-object-form
                  label: Scaling Rules
                  schema: schema/properties/resources/properties/autoscalingKubedbComDruidAutoscaler/properties/spec/properties/storage/properties/historicals/properties/scalingRules
                  watcher:
                    func: handleUnit|autoscalingKubedbComDruidAutoscaler/spec/storage/historicals/scalingRules|scalingRules
                    paths:
                      - schema/properties/resources/properties/autoscalingKubedbComDruidAutoscaler/properties/spec/properties/storage/properties/historicals/properties/scalingRules
                  elements:
                    - type: input
                      label: AppliesUpto (In Storage units)
                      schema: appliesUpto
                    - type: input
                      label: Threshold (In %, Or In Storage Units)
                      schema: threshold
                - type: input
                  label: UpperBound
                  schema: schema/properties/resources/properties/autoscalingKubedbComDruidAutoscaler/properties/spec/properties/storage/properties/historicals/properties/upperBound
                  watcher:
                    func: handleUnit|autoscalingKubedbComDruidAutoscaler/spec/storage/historicals/upperBound
                    paths:
                      - schema/properties/resources/properties/autoscalingKubedbComDruidAutoscaler/properties/spec/properties/storage/properties/historicals/properties/upperBound
            - type: block-layout
              label: MiddleManagers
              showLabels: true
              elements:
                - type: select
                  label: Trigger
                  init:
                    type: func
                    value: setTrigger|autoscalingKubedbComDruidAutoscaler/spec/storage/middleManagers/trigger
                  options:
                    - text: 'On'
                      value: 'On'
                    - text: 'Off'
                      value: 'Off'
                  schema: schema/properties/resources/properties/autoscalingKubedbComDruidAutoscaler/properties/spec/properties/storage/properties/middleManagers/properties/trigger
                - type: select
                  label: Expansion Mode
                  options:
                    - text: Online
                      value: Online
                    - text: Offline
                      value: Offline
                  schema: schema/properties/resources/properties/autoscalingKubedbComDruidAutoscaler/properties/spec/properties/storage/properties/middleManagers/properties/expansionMode
                - type: input
                  label: UsageThreshold (%)
                  schema: schema/properties/resources/properties/autoscalingKubedbComDruidAutoscaler/properties/spec/properties/storage/properties/middleManagers/properties/usageThreshold
                - type: array-object-form
                  label: Scaling Rules
                  schema: schema/properties/resources/properties/autoscalingKubedbComDruidAutoscaler/properties/spec/properties/storage/properties/middleManagers/properties/scalingRules
                  watcher:
                    func: handleUnit|autoscalingKubedbComDruidAutoscaler/spec/storage/middleManagers/scalingRules|scalingRules
                    paths:
                      - schema/properties/resources/properties/autoscalingKubedbComDruidAutoscaler/properties/spec/properties/storage/properties/middleManagers/properties/scalingRules
                  elements:
                    - type: input
                      label: AppliesUpto (In Storage units)
                      schema: appliesUpto
                    - type: input
                      label: Threshold (In %, Or In Storage Units)
                      schema: threshold
                - type: input
                  label: UpperBound
                  schema: schema/properties/resources/properties/autoscalingKubedbComDruidAutoscaler/properties/spec/properties/storage/properties/middleManagers/properties/upperBound
                  watcher:
                    func: handleUnit|autoscalingKubedbComDruidAutoscaler/spec/storage/middleManagers/upperBound
                    paths:
                      - schema/properties/resources/properties/autoscalingKubedbComDruidAutoscaler/properties/spec/properties/storage/properties/middleManagers/properties/upperBound
        - type: block-layout
          label: OpsRequest Options
          showLabels: true
          if:
            type: function
            name: showOpsRequestOptions
          elements:
            - type: select
              label: Timeout
              schema: schema/properties/resources/properties/autoscalingKubedbComDruidAutoscaler/properties/spec/properties/opsRequestOptions/properties/timeout
              options:
                - text: 5 minutes
                  value: 5m0s
                - text: 10 minutes
                  value: 10m0s
                - text: 30 minutes
                  value: 30m0s
                - text: 1 hour
                  value: 1h0m
                - text: 2 hours
                  value: 2h0m
                - text: 5 hours
                  value: 5h0m
                - text: 10 hours
                  value: 10h0m
            - type: radio
              label: Apply
              init:
                type: func
                value: setApplyToIfReady
              options:
                - text: IfReady (OpsRequest will be applied if database is ready)
                  value: IfReady
                - text: Always (OpsRequest will always be applied)
                  value: Always
              schema: schema/properties/resources/properties/autoscalingKubedbComDruidAutoscaler/properties/spec/properties/opsRequestOptions/properties/apply